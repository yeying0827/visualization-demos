import{c as le,g as ce}from"./_commonjsHelpers-5-cIlDoe.js";var se={exports:{}};(function(ue,de){(function(A,i){ue.exports=i()})(le,function(){return function(o){var A={};function i(c){if(A[c])return A[c].exports;var l=A[c]={i:c,l:!1,exports:{}};return o[c].call(l.exports,l,l.exports,i),l.l=!0,l.exports}return i.m=o,i.c=A,i.d=function(c,l,E){i.o(c,l)||Object.defineProperty(c,l,{enumerable:!0,get:E})},i.r=function(c){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})},i.t=function(c,l){if(l&1&&(c=i(c)),l&8||l&4&&typeof c=="object"&&c&&c.__esModule)return c;var E=Object.create(null);if(i.r(E),Object.defineProperty(E,"default",{enumerable:!0,value:c}),l&2&&typeof c!="string")for(var T in c)i.d(E,T,(function(b){return c[b]}).bind(null,T));return E},i.n=function(c){var l=c&&c.__esModule?function(){return c.default}:function(){return c};return i.d(l,"a",l),l},i.o=function(c,l){return Object.prototype.hasOwnProperty.call(c,l)},i.p="/js/",i(i.s=0)}([function(o,A,i){i.r(A);var c=i(1);A.default=c.default},function(o,A,i){i.r(A),i.d(A,"default",function(){return J});var c=i(2),l=i.n(c),E=i(3),T=i.n(E),b=i(9),M=i.n(b),G=i(13),V=i.n(G),X=i(14),U=i.n(X),j=i(15),Q=i.n(j),ee=i(16),z=i.n(ee),Y=i(18),p=i(20),B=i.n(p),D=i(21),S=i.n(D),w=i(22),x=i.n(w),W=`#version 300 es
precision highp float;
precision highp int;

in vec3 a_vertexPosition;

void main() {
  gl_PointSize = 1.0;
  gl_Position = vec4(a_vertexPosition, 1);
}`,L=`#version 300 es
precision highp float;
precision highp int;

in vec4 a_vertexPosition;
in vec2 a_vertexTextureCoord;

out vec2 vTextureCoord;

void main() {
  gl_PointSize = 1.0;
  gl_Position = a_vertexPosition;
  vTextureCoord = a_vertexTextureCoord;
}`,H=`#version 300 es
precision highp float;
precision highp int;

out vec4 FragColor;
void main() {
  FragColor = vec4(0.0, 0.0, 0.0, 0.1);
}`,re={};function te(O){for(var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3,n=[],e=O.length,r=0;r<e;r++)r%g<2&&n.push(.5*(O[r]+1));return n}function ae(O,g){var n=g._buffers;Object.values(n).forEach(function(e){O.deleteBuffer(e)}),g._buffers={}}function ne(O,g,n){return O.activeTexture(O.TEXTURE0+n),Array.isArray(g._img)?O.bindTexture(O.TEXTURE_CUBE_MAP,g):O.bindTexture(O.TEXTURE_2D,g),g}var ie={int:"1i",ivec2:"2i",ivec3:"3i",ivec4:"4i",float:"1f",vec2:"2f",vec3:"3f",vec4:"4f",mat2:"Matrix2fv",mat3:"Matrix3fv",mat4:"Matrix4fv",sampler1D:"sampler1D",sampler2D:"sampler2D",sampler3D:"sampler3D",samplerCube:"samplerCube",sampler1DShadow:"sampler1DShadow",sampler2DShadow:"sampler2DShadow",sampler2DRect:"sampler2DRect",sampler2DRectShadow:"sampler2DRectShadow"},J=function(){function O(g){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};V()(this,O),this.options=Object.assign({},O.defaultOptions,n),this.canvas=g;var e;this.options.webgl2&&(e=g.getContext("webgl2",this.options)),e==null&&(e=Object(Y.setupWebGL)(g,this.options),this.aia_ext=e.getExtension("ANGLE_instanced_arrays")),this.gl=e,e.viewport(0,0,g.width,g.height),e.clearColor(0,0,0,0),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA),this.programs=[],this._events={}}return U()(O,[{key:"program",get:function(){var n=this.gl;return n.getParameter(n.CURRENT_PROGRAM)}},{key:"_declareUniform",value:function(n,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"1f",t=this.gl,s=t.getUniformLocation(n,e),a,d=this;if(/^sampler/.test(r)){var v=n._samplerMap,y=n._bindTextures;Object.defineProperty(n.uniforms,e,{get:function(){return a},set:function(_){a=_;var R=v[e]!=null?v[e]:y.length;y[R]=_,ne(t,_,R),v[e]||(v[e]=R,t.uniform1i(s,R)),d.options.autoUpdate&&d.update()},configurable:!1,enumerable:!0})}else{var u=r.indexOf("Matrix")===0,m=!u&&/v$/.test(r),h=t["uniform".concat(r)].bind(t);Object.defineProperty(n.uniforms,e,{get:function(){return a},set:function(_){a=_,typeof _=="number"&&(_=[_]),u?h(s,!1,_):m?h(s,_):h.apply(void 0,[s].concat(M()(_))),d.options.autoUpdate&&d.update()},configurable:!1,enumerable:!0})}}},{key:"_draw",value:function(){var n=this,e=this.program;e.meshData.forEach(function(r,t){var s=r.positions,a=r.cells,d=r.instanceCount,v=r.cellsCount,y=r.attributes,u=r.uniforms,m=r.textureCoord,h=r.enableBlend,f=n.gl,_=r.mode!=null?r.mode:f.TRIANGLES;typeof _=="string"&&(_=f[_]),h?f.enable(f.BLEND):f.disable(f.BLEND),f.bindBuffer(f.ARRAY_BUFFER,e._buffers.verticesBuffer),f.bufferData(f.ARRAY_BUFFER,s,f.STATIC_DRAW),a&&(f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,e._buffers.cellsBuffer),f.bufferData(f.ELEMENT_ARRAY_BUFFER,a,f.STATIC_DRAW));var R=[];y&&Object.values(y).forEach(function(N){var $=N.name,Z=N.data,K=N.divisor;if(f.bindBuffer(f.ARRAY_BUFFER,e._buffers[$]),f.bufferData(f.ARRAY_BUFFER,Z,f.STATIC_DRAW),K!=null){var k=f.getAttribLocation(e,$);k>=0&&(f.enableVertexAttribArray(k),R.push(k),f.vertexAttribDivisor?f.vertexAttribDivisor(k,K):n.aia_ext&&n.aia_ext.vertexAttribDivisorANGLE(k,K))}}),u&&Object.entries(u).forEach(function(N){var $=T()(N,2),Z=$[0],K=$[1];n.uniforms[Z]=K});var P;if(!a){var I=e._dimension;P=s.length/I}if(e._enableTextures&&e._buffers.texCoordBuffer){var C=m||te(s,e._dimension);f.bindBuffer(f.ARRAY_BUFFER,e._buffers.texCoordBuffer),f.bufferData(f.ARRAY_BUFFER,O.FLOAT(C),f.STATIC_DRAW)}d!=null?(a?f.drawElementsInstanced?f.drawElementsInstanced(_,v,f.UNSIGNED_SHORT,0,d):n.aia_ext&&n.aia_ext.drawElementsInstancedANGLE(_,v,f.UNSIGNED_SHORT,0,d):f.drawArraysInstanced?f.drawArraysInstanced(_,0,P,d):n.aia_ext.drawArraysInstancedANGLE(_,0,P,d),R.forEach(function(N){f.vertexAttribDivisor?f.vertexAttribDivisor(N,null):n.aia_ext&&n.aia_ext.vertexAttribDivisorANGLE(N,null)})):a?f.drawElements(_,v,f.UNSIGNED_SHORT,0):f.drawArrays(_,0,P)})}},{key:"isWebGL2",get:function(){return typeof WebGL2RenderingContext<"u"&&this.gl instanceof WebGL2RenderingContext}},{key:"enableTextures",get:function(){return this.program&&this.program._enableTextures}},{key:"uniforms",get:function(){var n=this.program;if(!n||!n.uniforms)throw Error("No avaliable program.");return n.uniforms}},{key:"deleteProgram",value:function(n){var e=this.gl;this.program===n&&(this.startRender=!1,this._renderFrameID&&(cancelAnimationFrame(this._renderFrameID),delete this._renderFrameID),e.useProgram(null));var r=this.programs.indexOf(n);r>=0&&this.programs.splice(r,1),ae(e,n),e.deleteProgram(n)}},{key:"setMeshData",value:function(n){var e=this;Array.isArray(n)||(n=[n]);var r=this.program;r.meshData=n.map(function(t){var s=t.mode,a=t.positions,d=t.instanceCount,v=t.cells,y=t.cellsCount,u=t.attributes,m=t.uniforms,h=t.textureCoord,f=t.enableBlend,_={positions:O.FLOAT(a),uniforms:m,enableBlend:!!f,textureCoord:O.FLOAT(h)};if(v&&(_.cells=O.USHORT(v),_.cellsCount=y||_.cells.length),s!=null&&(_.mode=s),d!=null){if(!e.isWebGL2&&!e.aia_ext)throw new Error("Cannot use instanceCount in this rendering context, use webgl2 context instead.");_.instanceCount=d}if(u){var R={};Object.entries(u).forEach(function(P){var I=T()(P,2),C=I[0],N=I[1];if(!r._attribute[C])r._attribute[C]="ignored";else if(r._attribute[C]!=="ignored"){var $=r._attribute[C],Z=$.name,K=$.type,k=N.data||N;if(Array.isArray(k)&&(k=O[K](k)),R[C]={name:Z,data:k},N.divisor!=null){if(!e.isWebGL2&&!e.aia_ext)throw new Error("Cannot use divisor in this rendering context, use webgl2 context instead.");R[C].divisor=N.divisor}}}),_.attributes=R}return _}),this.options.autoUpdate&&this.update()}},{key:"createProgram",value:function(n,e){var r=this,t=/^\s*uniform\s+sampler/mg.test(n);n==null&&(n=this.options.webgl2?H:S.a),e==null&&(e=t?x.a:B.a,this.options.webgl2&&(e=t?L:W));var s=this.gl,a=Object(Y.createProgram)(s,e,n);a.shaderText={vertexShader:e,fragmentShader:n},a._buffers={},a._attribute={},a.uniforms={},a._samplerMap={},a._bindTextures=[];var d=new RegExp("(?:attribute|in) vec(\\d) ".concat(this.options.vertexPosition),"im"),v=e.match(d);v&&(a._dimension=Number(v[1]));var y=new RegExp("(?:attribute|in) vec(\\d) ".concat(this.options.vertexTextureCoord),"im");v=e.match(y),v&&(a._texCoordSize=Number(v[1]));var u=/^\s*(?:attribute|in) (\w+?)(\d*) (\w+)/gim;if(v=e.match(u),v)for(var m=0;m<v.length;m++){var h=/^\s*(?:attribute|in) (\w+?)(\d*) (\w+)/im,f=v[m].match(h);if(f&&f[3]!==this.options.vertexPosition&&f[3]!==this.options.vertexTextureCoord){var _=T()(f,4),R=_[1],P=_[2],I=_[3];R==="mat"&&(P=Math.pow(P,2)),a._buffers[I]=s.createBuffer(),a._attribute[I]={name:I,type:R,size:Number(P)||1}}}var C=/^\s*uniform\s+(\w+)\s+(\w+)(\[\d+\])?/mg;v=e.match(C)||[],v=v.concat(n.match(C)||[]),v.forEach(function($){var Z=$.match(/^\s*uniform\s+(\w+)\s+(\w+)(\[\d+\])?/),K=Z.slice(1),k=T()(K,3),q=k[0],oe=k[1],F=k[2];q=ie[q],F=!!F,q.indexOf("Matrix")!==0&&F&&(q+="v"),r._declareUniform(a,oe,q)}),a._buffers.verticesBuffer=s.createBuffer(),a._buffers.cellsBuffer=s.createBuffer();var N=s.getAttribLocation(a,this.options.vertexTextureCoord);return a._enableTextures=N>=0,a._enableTextures&&(a._buffers.texCoordBuffer=s.createBuffer()),this.programs.push(a),a}},{key:"useProgram",value:function(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.startRender=!1,this._renderFrameID&&(cancelAnimationFrame(this._renderFrameID),delete this._renderFrameID);var r=this.gl;r.useProgram(n);var t=n._dimension;r.bindBuffer(r.ARRAY_BUFFER,n._buffers.verticesBuffer);var s=r.getAttribLocation(n,this.options.vertexPosition);if(r.vertexAttribPointer(s,t,r.FLOAT,!1,0,0),r.enableVertexAttribArray(s),n._enableTextures){r.bindBuffer(r.ARRAY_BUFFER,n._buffers.texCoordBuffer);var a=r.getAttribLocation(n,this.options.vertexTextureCoord);r.vertexAttribPointer(a,n._texCoordSize||2,r.FLOAT,!1,0,0),r.enableVertexAttribArray(a)}if(Object.entries(n._attribute).forEach(function(y){var u=T()(y,2),m=u[0],h=u[1];if(h!=="ignored"){var f=h.size,_=e[m]||{},R=!!_.normalize,P=_.type||"FLOAT",I=_.key||m;P==="UBYTE"&&(P="UNSIGNED_BYTE"),P==="USHORT"&&(P="UNSIGNED_SHORT"),h.type=P,I&&I!==m&&(n._attribute[I]=h),r.bindBuffer(r.ARRAY_BUFFER,n._buffers[m]);var C=r.getAttribLocation(n,m);C>=0&&(r.vertexAttribPointer(C,f,r[P],R,0,0),r.enableVertexAttribArray(C))}}),!n.meshData){var d=[[-1,-1,0,1].slice(0,t),[1,-1,0,1].slice(0,t),[1,1,0,1].slice(0,t),[-1,1,0,1].slice(0,t)],v=[[0,1,3],[3,1,2]];this.setMeshData({positions:d,cells:v})}return n}},{key:"compileSync",value:function(n,e){n=n||S.a;var r={};function t(v){v=v.replace(/^\s*/mg,"");var y=[],u=v.match(/^#pragma\s+include\s+.*/mg);if(u){for(var m=0;m<u.length;m++){var h=u[m],f=h.match(/(?:<|")(.*)(?:>|")/);if(f){var _=f[0].indexOf("<")===0?"lib":"link",R=f[1];if(R==="graph"&&(R="graphics"),r[R])y.push("/* included ".concat(R," */"));else if(r[R]=!0,_==="lib"){var P=t(re[R]);y.push(P)}else if(_==="link")throw new Error("Cannot load external links synchronously. Use compile instead of compileSync.")}}y.forEach(function(I){v=v.replace(/^#pragma\s+include\s+.*/m,I)})}return v}var s=t(n),a=e?t(e):null,d=this.createProgram(s,a);return d}},{key:"compile",value:function(){var g=l()(z.a.mark(function e(r,t){var s,a,d,v,y,u;return z.a.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return d=function(){return d=l()(z.a.mark(function _(R){var P,I,C,N,$,Z,K,k,q;return z.a.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(R=R.replace(/^\s*/mg,""),P=[],I=R.match(/^#pragma\s+include\s+.*/mg),!I){F.next=36;break}C=0;case 5:if(!(C<I.length)){F.next=35;break}if(N=I[C],$=N.match(/(?:<|")(.*)(?:>|")/),!$){F.next=32;break}if(Z=$[0].indexOf("<")===0?"lib":"link",K=$[1],K==="graph"&&(K="graphics"),s[K]){F.next=31;break}if(s[K]=!0,Z!=="lib"){F.next=21;break}return F.next=17,a(re[K]);case 17:k=F.sent,P.push(k),F.next=29;break;case 21:if(Z!=="link"){F.next=29;break}return F.next=24,O.fetchShader(K);case 24:return q=F.sent,F.next=27,a(q);case 27:q=F.sent,P.push(q);case 29:F.next=32;break;case 31:P.push("/* included ".concat(K," */"));case 32:C++,F.next=5;break;case 35:P.forEach(function(fe){R=R.replace(/^#pragma\s+include\s+.*/m,fe)});case 36:return F.abrupt("return",R);case 37:case"end":return F.stop()}},_)})),d.apply(this,arguments)},a=function(_){return d.apply(this,arguments)},r=r||S.a,s={},h.next=6,a(r);case 6:if(v=h.sent,!t){h.next=13;break}return h.next=10,a(t);case 10:h.t0=h.sent,h.next=14;break;case 13:h.t0=null;case 14:return y=h.t0,u=this.createProgram(v,y),h.abrupt("return",u);case 17:case"end":return h.stop()}},e,this)}));function n(e,r){return g.apply(this,arguments)}return n}()},{key:"load",value:function(){var g=l()(z.a.mark(function e(r){var t,s=arguments;return z.a.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return t=s.length>1&&s[1]!==void 0?s[1]:null,d.next=3,O.fetchShader(r);case 3:if(r=d.sent,!t){d.next=8;break}return d.next=7,O.fetchShader(t);case 7:t=d.sent;case 8:return d.abrupt("return",this.compile(r,t));case 9:case"end":return d.stop()}},e,this)}));function n(e){return g.apply(this,arguments)}return n}()},{key:"createTexture",value:function(){var n=this,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=r.wrapS,s=t===void 0?this.gl.CLAMP_TO_EDGE:t,a=r.wrapT,d=a===void 0?this.gl.CLAMP_TO_EDGE:a,v=r.minFilter,y=v===void 0?this.gl.LINEAR:v,u=r.magFilter,m=u===void 0?this.gl.LINEAR:u,h=this.gl,f=Array.isArray(e)?h.TEXTURE_CUBE_MAP:h.TEXTURE_2D;this._max_texture_image_units=this._max_texture_image_units||h.getParameter(h.MAX_COMBINED_TEXTURE_IMAGE_UNITS),h.activeTexture(h.TEXTURE0+this._max_texture_image_units-1);var _=h.createTexture();h.bindTexture(f,_),h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,!0);var R=this.canvas,P=R.width,I=R.height;if(e)if(f===h.TEXTURE_CUBE_MAP)for(var C=0;C<6;C++)h.texImage2D(h.TEXTURE_CUBE_MAP_POSITIVE_X+C,0,h.RGBA,h.RGBA,h.UNSIGNED_BYTE,e[C]);else h.texImage2D(f,0,h.RGBA,h.RGBA,h.UNSIGNED_BYTE,e);else if(f===h.TEXTURE_CUBE_MAP)for(var N=0;N<6;N++)this.gl.texImage2D(this.gl.TEXTURE_CUBE_MAP_POSITIVE_X+N,0,h.RGBA,P,I,0,h.RGBA,h.UNSIGNED_BYTE,null);else h.texImage2D(f,0,h.RGBA,P,I,0,h.RGBA,h.UNSIGNED_BYTE,null);return h.texParameteri(f,h.TEXTURE_MIN_FILTER,y),h.texParameteri(f,h.TEXTURE_MAG_FILTER,m),h.texParameteri(f,h.TEXTURE_WRAP_S,s),h.texParameteri(f,h.TEXTURE_WRAP_T,d),f===h.TEXTURE_CUBE_MAP&&(e.width=e[0].width,e.height=e[0].height),h.bindTexture(f,null),_._img=e||{width:P,height:I},_.delete=function(){n.deleteTexture(_)},_}},{key:"deleteTexture",value:function(n){var e=n._img;this.gl.deleteTexture(n),typeof e.close=="function"&&e.close()}},{key:"loadTexture",value:function(){var g=l()(z.a.mark(function e(r){var t,s,a,d,v=arguments;return z.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return t=v.length>1&&v[1]!==void 0?v[1]:{},s=t.useImageBitmap,a=s===void 0?!0:s,u.next=3,O.loadImage(r,{useImageBitmap:a});case 3:return d=u.sent,u.abrupt("return",this.createTexture(d));case 5:case"end":return u.stop()}},e,this)}));function n(e){return g.apply(this,arguments)}return n}()},{key:"createFBO",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=n.color,r=e===void 0?1:e,t=n.blend,s=t===void 0?!1:t,a=n.depth,d=a===void 0?this.options.depth!==!1:a,v=n.stencil,y=v===void 0?!!this.options.stencil:v,u=this.gl,m=u.createFramebuffer();u.bindFramebuffer(u.FRAMEBUFFER,m);for(var h=[],f=0;f<r;f++){var _=this.createTexture();u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0+f,u.TEXTURE_2D,_,0),h.push(_)}m.textures=h,m.texture=h[0],m.blend=s;var R=this.canvas,P=R.width,I=R.height;return d&&!y&&(m.depthBuffer=u.createRenderbuffer(),u.bindRenderbuffer(u.RENDERBUFFER,m.depthBuffer),u.renderbufferStorage(u.RENDERBUFFER,u.DEPTH_COMPONENT16,P,I),u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,m.depthBuffer)),y&&!d&&(m.stencilBuffer=u.createRenderbuffer(),u.bindRenderbuffer(u.RENDERBUFFER,m.stencilBuffer),u.renderbufferStorage(u.RENDERBUFFER,u.STENCIL_INDEX8,P,I),u.framebufferRenderbuffer(u.FRAMEBUFFER,u.STENCIL_ATTACHMENT,u.RENDERBUFFER,m.stencilBuffer)),d&&y&&(m.depthStencilBuffer=u.createRenderbuffer(),u.bindRenderbuffer(u.RENDERBUFFER,m.depthStencilBuffer),u.renderbufferStorage(u.RENDERBUFFER,u.DEPTH_STENCIL,P,I),u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,m.depthStencilBuffer)),u.bindFramebuffer(u.FRAMEBUFFER,null),m}},{key:"bindFBO",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;this.fbo=n}},{key:"render",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};n.clearBuffer,this.startRender=!0;var e=this.gl,r=this.program;r||(r=this.createProgram(),this.useProgram(r)),this.fbo&&e.bindFramebuffer(e.FRAMEBUFFER,this.fbo);var t=this.options.depth;t&&e.enable(e.DEPTH_TEST),this.gl.clear(this.gl.COLOR_BUFFER_BIT|(t?this.gl.DEPTH_BUFFER_BIT:0)|(this.options.stencil?this.gl.STENCIL_BUFFER_BIT:0));var s=this._renderFrameID;this._draw(),this.fbo&&e.bindFramebuffer(e.FRAMEBUFFER,null),this._renderFrameID===s&&(this._renderFrameID=null)}},{key:"update",value:function(){this.startRender&&this._renderFrameID==null&&(this._renderFrameID=requestAnimationFrame(this.render.bind(this)))}}],[{key:"addLibs",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(re,n)}},{key:"FLOAT",value:function(n,e){return Object(Y.pointsToBuffer)(n,Float32Array,e)}},{key:"UNSIGNED_BYTE",value:function(n,e){return Object(Y.pointsToBuffer)(n,Uint8Array,e)}},{key:"UNSIGNED_SHORT",value:function(n,e){return Object(Y.pointsToBuffer)(n,Uint16Array,e)}},{key:"BYTE",value:function(n,e){return Object(Y.pointsToBuffer)(n,Int8Array,e)}},{key:"SHORT",value:function(n,e){return Object(Y.pointsToBuffer)(n,Int16Array,e)}}]),O}();Q()(J,"defaultOptions",{preserveDrawingBuffer:!0,autoUpdate:!0,vertexPosition:"a_vertexPosition",vertexTextureCoord:"a_vertexTextureCoord",webgl2:!1}),Q()(J,"UBYTE",J.UNSIGNED_BYTE),Q()(J,"USHORT",J.UNSIGNED_SHORT),Q()(J,"fetchShader",Y.fetchShader),Q()(J,"loadImage",Y.loadImage)},function(o,A){function i(l,E,T,b,M,G,V){try{var X=l[G](V),U=X.value}catch(j){T(j);return}X.done?E(U):Promise.resolve(U).then(b,M)}function c(l){return function(){var E=this,T=arguments;return new Promise(function(b,M){var G=l.apply(E,T);function V(U){i(G,b,M,V,X,"next",U)}function X(U){i(G,b,M,V,X,"throw",U)}V(void 0)})}}o.exports=c,o.exports.__esModule=!0,o.exports.default=o.exports},function(o,A,i){var c=i(4),l=i(5),E=i(6),T=i(8);function b(M,G){return c(M)||l(M,G)||E(M,G)||T()}o.exports=b,o.exports.__esModule=!0,o.exports.default=o.exports},function(o,A){function i(c){if(Array.isArray(c))return c}o.exports=i,o.exports.__esModule=!0,o.exports.default=o.exports},function(o,A){function i(c,l){var E=c==null?null:typeof Symbol<"u"&&c[Symbol.iterator]||c["@@iterator"];if(E!=null){var T=[],b=!0,M=!1,G,V;try{for(E=E.call(c);!(b=(G=E.next()).done)&&(T.push(G.value),!(l&&T.length===l));b=!0);}catch(X){M=!0,V=X}finally{try{!b&&E.return!=null&&E.return()}finally{if(M)throw V}}return T}}o.exports=i,o.exports.__esModule=!0,o.exports.default=o.exports},function(o,A,i){var c=i(7);function l(E,T){if(E){if(typeof E=="string")return c(E,T);var b=Object.prototype.toString.call(E).slice(8,-1);if(b==="Object"&&E.constructor&&(b=E.constructor.name),b==="Map"||b==="Set")return Array.from(E);if(b==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return c(E,T)}}o.exports=l,o.exports.__esModule=!0,o.exports.default=o.exports},function(o,A){function i(c,l){(l==null||l>c.length)&&(l=c.length);for(var E=0,T=new Array(l);E<l;E++)T[E]=c[E];return T}o.exports=i,o.exports.__esModule=!0,o.exports.default=o.exports},function(o,A){function i(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}o.exports=i,o.exports.__esModule=!0,o.exports.default=o.exports},function(o,A,i){var c=i(10),l=i(11),E=i(6),T=i(12);function b(M){return c(M)||l(M)||E(M)||T()}o.exports=b,o.exports.__esModule=!0,o.exports.default=o.exports},function(o,A,i){var c=i(7);function l(E){if(Array.isArray(E))return c(E)}o.exports=l,o.exports.__esModule=!0,o.exports.default=o.exports},function(o,A){function i(c){if(typeof Symbol<"u"&&c[Symbol.iterator]!=null||c["@@iterator"]!=null)return Array.from(c)}o.exports=i,o.exports.__esModule=!0,o.exports.default=o.exports},function(o,A){function i(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}o.exports=i,o.exports.__esModule=!0,o.exports.default=o.exports},function(o,A){function i(c,l){if(!(c instanceof l))throw new TypeError("Cannot call a class as a function")}o.exports=i,o.exports.__esModule=!0,o.exports.default=o.exports},function(o,A){function i(l,E){for(var T=0;T<E.length;T++){var b=E[T];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(l,b.key,b)}}function c(l,E,T){return E&&i(l.prototype,E),T&&i(l,T),Object.defineProperty(l,"prototype",{writable:!1}),l}o.exports=c,o.exports.__esModule=!0,o.exports.default=o.exports},function(o,A){function i(c,l,E){return l in c?Object.defineProperty(c,l,{value:E,enumerable:!0,configurable:!0,writable:!0}):c[l]=E,c}o.exports=i,o.exports.__esModule=!0,o.exports.default=o.exports},function(o,A,i){o.exports=i(17)},function(o,A,i){var c=function(l){var E=Object.prototype,T=E.hasOwnProperty,b,M=typeof Symbol=="function"?Symbol:{},G=M.iterator||"@@iterator",V=M.asyncIterator||"@@asyncIterator",X=M.toStringTag||"@@toStringTag";function U(e,r,t){return Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}),e[r]}try{U({},"")}catch{U=function(r,t,s){return r[t]=s}}function j(e,r,t,s){var a=r&&r.prototype instanceof D?r:D,d=Object.create(a.prototype),v=new O(s||[]);return d._invoke=ae(e,t,v),d}l.wrap=j;function Q(e,r,t){try{return{type:"normal",arg:e.call(r,t)}}catch(s){return{type:"throw",arg:s}}}var ee="suspendedStart",z="suspendedYield",Y="executing",p="completed",B={};function D(){}function S(){}function w(){}var x={};U(x,G,function(){return this});var W=Object.getPrototypeOf,L=W&&W(W(g([])));L&&L!==E&&T.call(L,G)&&(x=L);var H=w.prototype=D.prototype=Object.create(x);S.prototype=w,U(H,"constructor",w),U(w,"constructor",S),S.displayName=U(w,X,"GeneratorFunction");function re(e){["next","throw","return"].forEach(function(r){U(e,r,function(t){return this._invoke(r,t)})})}l.isGeneratorFunction=function(e){var r=typeof e=="function"&&e.constructor;return r?r===S||(r.displayName||r.name)==="GeneratorFunction":!1},l.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,U(e,X,"GeneratorFunction")),e.prototype=Object.create(H),e},l.awrap=function(e){return{__await:e}};function te(e,r){function t(d,v,y,u){var m=Q(e[d],e,v);if(m.type==="throw")u(m.arg);else{var h=m.arg,f=h.value;return f&&typeof f=="object"&&T.call(f,"__await")?r.resolve(f.__await).then(function(_){t("next",_,y,u)},function(_){t("throw",_,y,u)}):r.resolve(f).then(function(_){h.value=_,y(h)},function(_){return t("throw",_,y,u)})}}var s;function a(d,v){function y(){return new r(function(u,m){t(d,v,u,m)})}return s=s?s.then(y,y):y()}this._invoke=a}re(te.prototype),U(te.prototype,V,function(){return this}),l.AsyncIterator=te,l.async=function(e,r,t,s,a){a===void 0&&(a=Promise);var d=new te(j(e,r,t,s),a);return l.isGeneratorFunction(r)?d:d.next().then(function(v){return v.done?v.value:d.next()})};function ae(e,r,t){var s=ee;return function(d,v){if(s===Y)throw new Error("Generator is already running");if(s===p){if(d==="throw")throw v;return n()}for(t.method=d,t.arg=v;;){var y=t.delegate;if(y){var u=ne(y,t);if(u){if(u===B)continue;return u}}if(t.method==="next")t.sent=t._sent=t.arg;else if(t.method==="throw"){if(s===ee)throw s=p,t.arg;t.dispatchException(t.arg)}else t.method==="return"&&t.abrupt("return",t.arg);s=Y;var m=Q(e,r,t);if(m.type==="normal"){if(s=t.done?p:z,m.arg===B)continue;return{value:m.arg,done:t.done}}else m.type==="throw"&&(s=p,t.method="throw",t.arg=m.arg)}}}function ne(e,r){var t=e.iterator[r.method];if(t===b){if(r.delegate=null,r.method==="throw"){if(e.iterator.return&&(r.method="return",r.arg=b,ne(e,r),r.method==="throw"))return B;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return B}var s=Q(t,e.iterator,r.arg);if(s.type==="throw")return r.method="throw",r.arg=s.arg,r.delegate=null,B;var a=s.arg;if(!a)return r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,B;if(a.done)r[e.resultName]=a.value,r.next=e.nextLoc,r.method!=="return"&&(r.method="next",r.arg=b);else return a;return r.delegate=null,B}re(H),U(H,X,"Generator"),U(H,G,function(){return this}),U(H,"toString",function(){return"[object Generator]"});function ie(e){var r={tryLoc:e[0]};1 in e&&(r.catchLoc=e[1]),2 in e&&(r.finallyLoc=e[2],r.afterLoc=e[3]),this.tryEntries.push(r)}function J(e){var r=e.completion||{};r.type="normal",delete r.arg,e.completion=r}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(ie,this),this.reset(!0)}l.keys=function(e){var r=[];for(var t in e)r.push(t);return r.reverse(),function s(){for(;r.length;){var a=r.pop();if(a in e)return s.value=a,s.done=!1,s}return s.done=!0,s}};function g(e){if(e){var r=e[G];if(r)return r.call(e);if(typeof e.next=="function")return e;if(!isNaN(e.length)){var t=-1,s=function a(){for(;++t<e.length;)if(T.call(e,t))return a.value=e[t],a.done=!1,a;return a.value=b,a.done=!0,a};return s.next=s}}return{next:n}}l.values=g;function n(){return{value:b,done:!0}}return O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=b,this.done=!1,this.delegate=null,this.method="next",this.arg=b,this.tryEntries.forEach(J),!e)for(var r in this)r.charAt(0)==="t"&&T.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=b)},stop:function(){this.done=!0;var e=this.tryEntries[0],r=e.completion;if(r.type==="throw")throw r.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function t(u,m){return d.type="throw",d.arg=e,r.next=u,m&&(r.method="next",r.arg=b),!!m}for(var s=this.tryEntries.length-1;s>=0;--s){var a=this.tryEntries[s],d=a.completion;if(a.tryLoc==="root")return t("end");if(a.tryLoc<=this.prev){var v=T.call(a,"catchLoc"),y=T.call(a,"finallyLoc");if(v&&y){if(this.prev<a.catchLoc)return t(a.catchLoc,!0);if(this.prev<a.finallyLoc)return t(a.finallyLoc)}else if(v){if(this.prev<a.catchLoc)return t(a.catchLoc,!0)}else if(y){if(this.prev<a.finallyLoc)return t(a.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(e,r){for(var t=this.tryEntries.length-1;t>=0;--t){var s=this.tryEntries[t];if(s.tryLoc<=this.prev&&T.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var a=s;break}}a&&(e==="break"||e==="continue")&&a.tryLoc<=r&&r<=a.finallyLoc&&(a=null);var d=a?a.completion:{};return d.type=e,d.arg=r,a?(this.method="next",this.next=a.finallyLoc,B):this.complete(d)},complete:function(e,r){if(e.type==="throw")throw e.arg;return e.type==="break"||e.type==="continue"?this.next=e.arg:e.type==="return"?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):e.type==="normal"&&r&&(this.next=r),B},finish:function(e){for(var r=this.tryEntries.length-1;r>=0;--r){var t=this.tryEntries[r];if(t.finallyLoc===e)return this.complete(t.completion,t.afterLoc),J(t),B}},catch:function(e){for(var r=this.tryEntries.length-1;r>=0;--r){var t=this.tryEntries[r];if(t.tryLoc===e){var s=t.completion;if(s.type==="throw"){var a=s.arg;J(t)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,t){return this.delegate={iterator:g(e),resultName:r,nextLoc:t},this.method==="next"&&(this.arg=b),B}},l}(o.exports);try{regeneratorRuntime=c}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=c:Function("r","regeneratorRuntime = r")(c)}},function(o,A,i){i.r(A),i.d(A,"setupWebGL",function(){return V}),i.d(A,"createProgram",function(){return X}),i.d(A,"pointsToBuffer",function(){return U}),i.d(A,"loadImage",function(){return Q}),i.d(A,"fetchShader",function(){return z});var c=i(2),l=i.n(c),E=i(19),T=i.n(E),b=i(16),M=i.n(b);function G(p,B){for(var D=["webgl","experimental-webgl","webkit-3d","moz-webgl"],S=null,w=0;w<D.length;++w){try{S=p.getContext(D[w],B)}catch{}if(S)break}return S}function V(p,B){var D=G(p,B);if(!D)throw new Error("Sorry, your browser doesn't support WebGL.");return D}function X(p,B,D){var S=p.createShader(p.VERTEX_SHADER);if(p.shaderSource(S,B),p.compileShader(S),!p.getShaderParameter(S,p.COMPILE_STATUS)){var w="Vertex shader failed to compile.  The error log is:".concat(p.getShaderInfoLog(S));throw new Error(w)}var x=p.createShader(p.FRAGMENT_SHADER);if(p.shaderSource(x,D),p.compileShader(x),!p.getShaderParameter(x,p.COMPILE_STATUS)){var W="Fragment shader failed to compile.  The error log is:".concat(p.getShaderInfoLog(x));throw new Error(W)}var L=p.createProgram();if(p.attachShader(L,S),p.attachShader(L,x),p.linkProgram(L),!p.getProgramParameter(L,p.LINK_STATUS)){var H="Shader program failed to link.  The error log is:".concat(p.getProgramInfoLog(L));throw new Error(H)}return p.deleteShader(S),p.deleteShader(x),L}function U(p){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Float32Array,D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(D&&!(D instanceof B))throw new TypeError("Wrong buffer type.");if(p==null||p instanceof B)return p;if(p[0]==null||p[0].length==null)return D?(D.set(p,0),D):new B(p);var S=p[0].length,w=p.length;D||(D=new B(S*w));for(var x=0,W=0;W<w;W++)for(var L=0;L<S;L++)D[x++]=p[W][L];return D}var j={};function Q(p){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},D=B.useImageBitmap,S=D===void 0?!0:D,w=B.alias,x=w===void 0?null:w;if(!j[p]){if(typeof Image=="function"){var W=new Image;typeof p=="string"&&!((typeof location>"u"?"undefined":T()(location))==="object"&&/^file:/.test(location.href))&&!/^data:/.test(p)&&(W.crossOrigin="anonymous"),j[p]=new Promise(function(L){W.onload=function(){S&&typeof createImageBitmap=="function"?createImageBitmap(W,{imageOrientation:"flipY"}).then(function(H){j[p]=H,x&&(j[x]=H),L(H)}):(j[p]=W,x&&(j[x]=W),L(W))},W.src=p}),x&&(j[x]=j[p])}else if(typeof fetch=="function")return fetch(p,{method:"GET",mode:"cors",cache:"default"}).then(function(L){return L.blob()}).then(function(L){return createImageBitmap(L,{imageOrientation:"flipY"}).then(function(H){return j[p]=H,x&&(j[x]=H),H})})}return j[p]}var ee={};function z(p){return Y.apply(this,arguments)}function Y(){return Y=l()(M.a.mark(function p(B){var D,S;return M.a.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(!ee[B]){x.next=2;break}return x.abrupt("return",ee[B]);case 2:return x.next=4,fetch(B);case 4:if(D=x.sent,!(D.status>=200&&D.status<300)){x.next=11;break}return x.next=8,D.text();case 8:return S=x.sent,ee[B]=S,x.abrupt("return",S);case 11:throw new Error("Shader loaded error.");case 12:case"end":return x.stop()}},p)})),Y.apply(this,arguments)}},function(o,A){function i(c){"@babel/helpers - typeof";return o.exports=i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},o.exports.__esModule=!0,o.exports.default=o.exports,i(c)}o.exports=i,o.exports.__esModule=!0,o.exports.default=o.exports},function(o,A){o.exports=`attribute vec3 a_vertexPosition;
void main() {
	gl_PointSize = 1.0;
	gl_Position = vec4(a_vertexPosition, 1);
}
`},function(o,A){o.exports=`#ifdef GL_ES
precision mediump float;
#endif
void main() {
	gl_FragColor = vec4(0.0, 0.0, 0.0, 0.1);
}
`},function(o,A){o.exports=`attribute vec4 a_vertexPosition;
attribute vec2 a_vertexTextureCoord;
varying vec2 vTextureCoord;
void main() {
	gl_PointSize = 1.0;
	gl_Position = a_vertexPosition;
	vTextureCoord = a_vertexTextureCoord;
}
`}]).default})})(se);var he=se.exports;const pe=ce(he);export{pe as G};
