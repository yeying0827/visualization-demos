import{_ as B,k as p,f as S,l as j,m as v,q as f,s as _,o as w,c as I,b as u,F as y,g as F,n as G,t as L,p as R,a as T}from"./index-jvjASubQ.js";import{t as q,g as z}from"./color-matrix-ThnoXl7S.js";const E=g=>(R("data-v-f0822736"),g=g(),T(),g),M=E(()=>u("h3",null,"灰度化图片",-1)),N=["onClick"],O={__name:"Gray",setup(g){const k=[{name:"普通写法"},{name:"重构写法"},{name:"使用color-matrix优化"}],l=p(0),D=m=>{const t=new Image;return t.crossOrigin="anonymous",new Promise(a=>{t.onload=()=>{a(t)},t.src=m})},n=p(null);let r;S(()=>{r=n.value.getContext("2d"),d(l.value),j(l,()=>{d(l.value)})});const d=m=>{switch(m){case 0:console.log("case 0"),async function(){const t=await D("src/assets/girl1.jpg"),{width:a,height:o}=t;n.value.width=a,n.value.height=o,r.drawImage(t,0,0);const c=r.getImageData(0,0,a,o),s=c.data;for(let e=0;e<a*o*4;e+=4){const i=s[e],b=s[e+1],x=s[e+2],C=s[e+3],h=.2126*i+.7152*b+.0722*x;s[e]=h,s[e+1]=h,s[e+2]=h,s[e+3]=C}r.putImageData(c,0,0)}();break;case 1:console.log("case 1"),async function(){const t=await v("src/assets/girl1.jpg"),a=f(t);_(a,({r:o,g:c,b:s,a:e})=>{const i=.2126*o+.7152*c+.0722*s;return[i,i,i,e]}),n.value.width=a.width,n.value.height=a.height,r.putImageData(a,0,0)}();break;case 2:console.log("case 2"),async function(){const t=await v("src/assets/girl1.jpg"),a=f(t);_(a,({r:o,g:c,b:s,a:e})=>q([o,c,s,e],z(1))),n.value.width=a.width,n.value.height=a.height,r.putImageData(a,0,0)}();break}};return(m,t)=>(w(),I(y,null,[M,u("div",null,[(w(),I(y,null,F(k,(a,o)=>u("span",{class:G(["filter-type",{active:l.value===o}]),onClick:c=>l.value=o},L(a.name),11,N)),64))]),u("canvas",{ref_key:"canvasRef",ref:n,width:"0",height:"0"},null,512)],64))}},$=B(O,[["__scopeId","data-v-f0822736"]]);export{$ as default};
