import{V as d}from"./vector2d-Djg1LsDx.js";import{C as b}from"./Canvas-1nIGdNzG.js";import{_ as N,f as B,o as I,c as S,F as C,p as D,a as E,b as P}from"./index-oy9D8ZzD.js";const m=f=>(D("data-v-1fd8fffb"),f=f(),E(),f),V=m(()=>P("h3",null,"点到线段和直线的距离",-1)),$=m(()=>P("canvas",{width:"512",height:"512"},null,-1)),k={__name:"Distance",setup(f){return B(()=>{let c,u,h,e=new Map,s=document.querySelector("canvas"),a=s.getContext("2d");const o=new b(a);_(),p(),L();function _(){c=new d(0,0),u=new d(100,0),h=new d(-100,0),e.set("P",c),e.set("Q",u),e.set("R",h)}function p(){o.drawAxis();for(const t of e)x(t[1],t[0]);Q(),R()}function Q(){o.drawLine(e.get("Q"),e.get("R"),"blue")}function x(t,n,i="#333"){a.beginPath(),a.save(),a.fillStyle=i,a.arc(t.x,t.y,2,0,Math.PI*2),a.scale(1,-1),a.fillText(`${n}`,t.x,16-t.y),a.restore(),a.fill()}function R(){let t=e.get("P").minus(e.get("Q")),n=e.get("R").minus(e.get("Q")),i=e.get("P").minus(e.get("R")),l=t.dot(n),r,w,y=t.cross(n);w=Math.abs(y)/n.len;let g=v();e.set("N",g),l<0?(o.drawLine(e.get("Q"),e.get("P"),"red"),o.drawLine(e.get("P"),g,"green"),r=t.len):l>Math.pow(n.len,2)?(o.drawLine(e.get("R"),e.get("P"),"red"),o.drawLine(e.get("P"),g,"green"),r=i.len):(r=w,o.drawLine(e.get("P"),g,"red"));let M=`点P到线段QR的距离：${Math.floor(r)}, 点P到QR所在直线的距离为${Math.floor(w)}`;o.drawText(M,-250,240)}function v(){let t=e.get("P").minus(e.get("Q")),n=e.get("R").minus(e.get("Q")),i=e.get("Q"),l=n.scale(t.dot(n)/n.len**2);return new d(l.x+i.x,l.y+i.y)}function L(){s.addEventListener("mousemove",t=>{const n=s.getBoundingClientRect();a.clearRect(-s.width/2,-s.height/2,s.width,s.height);let i=t.clientX-n.left-s.width/2,l=s.height/2-(t.clientY-n.top);c=new d(i,l),e.set("P",c),p()})}}),(c,u)=>(I(),S(C,null,[V,$],64))}},A=N(k,[["__scopeId","data-v-1fd8fffb"]]);export{A as default};
