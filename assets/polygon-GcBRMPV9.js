import{V as b}from"./vector2d-Djg1LsDx.js";import{j as te}from"./index-kUdbjN4z.js";var E={},ie=E;E.WINDING_ODD=0;E.WINDING_NONZERO=1;E.WINDING_POSITIVE=2;E.WINDING_NEGATIVE=3;E.WINDING_ABS_GEQ_TWO=4;E.POLYGONS=0;E.CONNECTED_POLYGONS=1;E.BOUNDARY_CONTOURS=2;E.tesselate=function(e){for(var n=e.debug||!1,t=new K,i=0;i<e.contours.length;i++)t.addContour(e.vertexSize||2,e.contours[i]);return t.tesselate(e.windingRule||E.WINDING_ODD,e.elementType||E.POLYGONS,e.polySize||3,e.vertexSize||2,e.normal||[0,0,1]),{vertices:t.vertices,vertexIndices:t.vertexIndices,vertexCount:t.vertexCount,elements:t.elements,elementCount:t.elementCount,mesh:n?t.mesh:void 0}};var d=function(e){if(!e)throw"Assertion Failed!"};function S(){this.next=null,this.prev=null,this.anEdge=null,this.coords=[0,0,0],this.s=0,this.t=0,this.pqHandle=0,this.n=0,this.idx=0}function k(){this.next=null,this.prev=null,this.anEdge=null,this.trail=null,this.n=0,this.marked=!1,this.inside=!1}function D(e){this.next=null,this.Sym=null,this.Onext=null,this.Lnext=null,this.Org=null,this.Lface=null,this.activeRegion=null,this.winding=0,this.side=e}D.prototype={get Rface(){return this.Sym.Lface},set Rface(e){this.Sym.Lface=e},get Dst(){return this.Sym.Org},set Dst(e){this.Sym.Org=e},get Oprev(){return this.Sym.Lnext},set Oprev(e){this.Sym.Lnext=e},get Lprev(){return this.Onext.Sym},set Lprev(e){this.Onext.Sym=e},get Dprev(){return this.Lnext.Sym},set Dprev(e){this.Lnext.Sym=e},get Rprev(){return this.Sym.Onext},set Rprev(e){this.Sym.Onext=e},get Dnext(){return this.Sym.Onext.Sym},set Dnext(e){this.Sym.Onext.Sym=e},get Rnext(){return this.Sym.Lnext.Sym},set Rnext(e){this.Sym.Lnext.Sym=e}};function z(){var e=new S,n=new k,t=new D(0),i=new D(1);e.next=e.prev=e,e.anEdge=null,n.next=n.prev=n,n.anEdge=null,n.trail=null,n.marked=!1,n.inside=!1,t.next=t,t.Sym=i,t.Onext=null,t.Lnext=null,t.Org=null,t.Lface=null,t.winding=0,t.activeRegion=null,i.next=i,i.Sym=t,i.Onext=null,i.Lnext=null,i.Org=null,i.Lface=null,i.winding=0,i.activeRegion=null,this.vHead=e,this.fHead=n,this.eHead=t,this.eHeadSym=i}z.prototype={makeEdge_:function(e){var n=new D(0),t=new D(1);e.Sym.side<e.side&&(e=e.Sym);var i=e.Sym.next;return t.next=i,i.Sym.next=n,n.next=e,e.Sym.next=t,n.Sym=t,n.Onext=n,n.Lnext=t,n.Org=null,n.Lface=null,n.winding=0,n.activeRegion=null,t.Sym=n,t.Onext=t,t.Lnext=n,t.Org=null,t.Lface=null,t.winding=0,t.activeRegion=null,n},splice_:function(e,n){var t=e.Onext,i=n.Onext;t.Sym.Lnext=n,i.Sym.Lnext=e,e.Onext=i,n.Onext=t},makeVertex_:function(e,n,t){var i=e;d(i!==null);var r=t.prev;i.prev=r,r.next=i,i.next=t,t.prev=i,i.anEdge=n;var s=n;do s.Org=i,s=s.Onext;while(s!==n)},makeFace_:function(e,n,t){var i=e;d(i!==null);var r=t.prev;i.prev=r,r.next=i,i.next=t,t.prev=i,i.anEdge=n,i.trail=null,i.marked=!1,i.inside=t.inside;var s=n;do s.Lface=i,s=s.Lnext;while(s!==n)},killEdge_:function(e){e.Sym.side<e.side&&(e=e.Sym);var n=e.next,t=e.Sym.next;n.Sym.next=t,t.Sym.next=n},killVertex_:function(e,n){var t=e.anEdge,i=t;do i.Org=n,i=i.Onext;while(i!==t);var r=e.prev,s=e.next;s.prev=r,r.next=s},killFace_:function(e,n){var t=e.anEdge,i=t;do i.Lface=n,i=i.Lnext;while(i!==t);var r=e.prev,s=e.next;s.prev=r,r.next=s},makeEdge:function(){var e=new S,n=new S,t=new k,i=this.makeEdge_(this.eHead);return this.makeVertex_(e,i,this.vHead),this.makeVertex_(n,i.Sym,this.vHead),this.makeFace_(t,i,this.fHead),i},splice:function(e,n){var t=!1,i=!1;if(e!==n){if(n.Org!==e.Org&&(i=!0,this.killVertex_(n.Org,e.Org)),n.Lface!==e.Lface&&(t=!0,this.killFace_(n.Lface,e.Lface)),this.splice_(n,e),!i){var r=new S;this.makeVertex_(r,n,e.Org),e.Org.anEdge=e}if(!t){var s=new k;this.makeFace_(s,n,e.Lface),e.Lface.anEdge=e}}},delete:function(e){var n=e.Sym,t=!1;if(e.Lface!==e.Rface&&(t=!0,this.killFace_(e.Lface,e.Rface)),e.Onext===e)this.killVertex_(e.Org,null);else if(e.Rface.anEdge=e.Oprev,e.Org.anEdge=e.Onext,this.splice_(e,e.Oprev),!t){var i=new k;this.makeFace_(i,e,e.Lface)}n.Onext===n?(this.killVertex_(n.Org,null),this.killFace_(n.Lface,null)):(e.Lface.anEdge=n.Oprev,n.Org.anEdge=n.Onext,this.splice_(n,n.Oprev)),this.killEdge_(e)},addEdgeVertex:function(e){var n=this.makeEdge_(e),t=n.Sym;this.splice_(n,e.Lnext),n.Org=e.Dst;var i=new S;return this.makeVertex_(i,t,n.Org),n.Lface=t.Lface=e.Lface,n},splitEdge:function(e,n){var t=this.addEdgeVertex(e),i=t.Sym;return this.splice_(e.Sym,e.Sym.Oprev),this.splice_(e.Sym,i),e.Dst=i.Org,i.Dst.anEdge=i.Sym,i.Rface=e.Rface,i.winding=e.winding,i.Sym.winding=e.Sym.winding,i},connect:function(e,n){var t=!1,i=this.makeEdge_(e),r=i.Sym;if(n.Lface!==e.Lface&&(t=!0,this.killFace_(n.Lface,e.Lface)),this.splice_(i,e.Lnext),this.splice_(r,n),i.Org=e.Dst,r.Org=n.Org,i.Lface=r.Lface=e.Lface,e.Lface.anEdge=r,!t){var s=new k;this.makeFace_(s,i,e.Lface)}return i},zapFace:function(e){var n=e.anEdge,t,i,r,s,a;i=n.Lnext;do t=i,i=t.Lnext,t.Lface=null,t.Rface===null&&(t.Onext===t?this.killVertex_(t.Org,null):(t.Org.anEdge=t.Onext,this.splice_(t,t.Oprev)),r=t.Sym,r.Onext===r?this.killVertex_(r.Org,null):(r.Org.anEdge=r.Onext,this.splice_(r,r.Oprev)),this.killEdge_(t));while(t!=n);s=e.prev,a=e.next,a.prev=s,s.next=a},countFaceVerts_:function(e){var n=e.anEdge,t=0;do t++,n=n.Lnext;while(n!==e.anEdge);return t},mergeConvexFaces:function(e){var n,t,i,r,s,a,f;for(n=this.fHead.next;n!==this.fHead;n=n.next)if(n.inside)for(t=n.anEdge,s=t.Org;i=t.Lnext,r=t.Sym,r&&r.Lface&&r.Lface.inside&&(a=this.countFaceVerts_(n),f=this.countFaceVerts_(r.Lface),a+f-2<=e&&h.vertCCW(t.Lprev.Org,t.Org,r.Lnext.Lnext.Org)&&h.vertCCW(r.Lprev.Org,r.Org,t.Lnext.Lnext.Org)&&(i=r.Lnext,this.delete(r),t=null,r=null)),!(t&&t.Lnext.Org===s);)t=i;return!0},check:function(){var e=this.fHead,n=this.vHead,t=this.eHead,i,r,s,a,f,o;for(r=e,r=e;(i=r.next)!==e;r=i){d(i.prev===r),f=i.anEdge;do d(f.Sym!==f),d(f.Sym.Sym===f),d(f.Lnext.Onext.Sym===f),d(f.Onext.Sym.Lnext===f),d(f.Lface===i),f=f.Lnext;while(f!==i.anEdge)}for(d(i.prev===r&&i.anEdge===null),a=n,a=n;(s=a.next)!==n;a=s){d(s.prev===a),f=s.anEdge;do d(f.Sym!==f),d(f.Sym.Sym===f),d(f.Lnext.Onext.Sym===f),d(f.Onext.Sym.Lnext===f),d(f.Org===s),f=f.Onext;while(f!==s.anEdge)}for(d(s.prev===a&&s.anEdge===null),o=t,o=t;(f=o.next)!==t;o=f)d(f.Sym.next===o.Sym),d(f.Sym!==f),d(f.Sym.Sym===f),d(f.Org!==null),d(f.Dst!==null),d(f.Lnext.Onext.Sym===f),d(f.Onext.Sym.Lnext===f);d(f.Sym.next===o.Sym&&f.Sym===this.eHeadSym&&f.Sym.Sym===f&&f.Org===null&&f.Dst===null&&f.Lface===null&&f.Rface===null)}};var h={};h.vertEq=function(e,n){return e.s===n.s&&e.t===n.t};h.vertLeq=function(e,n){return e.s<n.s||e.s===n.s&&e.t<=n.t};h.transLeq=function(e,n){return e.t<n.t||e.t===n.t&&e.s<=n.s};h.edgeGoesLeft=function(e){return h.vertLeq(e.Dst,e.Org)};h.edgeGoesRight=function(e){return h.vertLeq(e.Org,e.Dst)};h.vertL1dist=function(e,n){return Math.abs(e.s-n.s)+Math.abs(e.t-n.t)};h.edgeEval=function(e,n,t){d(h.vertLeq(e,n)&&h.vertLeq(n,t));var i=n.s-e.s,r=t.s-n.s;return i+r>0?i<r?n.t-e.t+(e.t-t.t)*(i/(i+r)):n.t-t.t+(t.t-e.t)*(r/(i+r)):0};h.edgeSign=function(e,n,t){d(h.vertLeq(e,n)&&h.vertLeq(n,t));var i=n.s-e.s,r=t.s-n.s;return i+r>0?(n.t-t.t)*i+(n.t-e.t)*r:0};h.transEval=function(e,n,t){d(h.transLeq(e,n)&&h.transLeq(n,t));var i=n.t-e.t,r=t.t-n.t;return i+r>0?i<r?n.s-e.s+(e.s-t.s)*(i/(i+r)):n.s-t.s+(t.s-e.s)*(r/(i+r)):0};h.transSign=function(e,n,t){d(h.transLeq(e,n)&&h.transLeq(n,t));var i=n.t-e.t,r=t.t-n.t;return i+r>0?(n.s-t.s)*i+(n.s-e.s)*r:0};h.vertCCW=function(e,n,t){return e.s*(n.t-t.t)+n.s*(t.t-e.t)+t.s*(e.t-n.t)>=0};h.interpolate=function(e,n,t,i){return e=e<0?0:e,t=t<0?0:t,e<=t?t==0?(n+i)/2:n+(i-n)*(e/(e+t)):i+(n-i)*(t/(e+t))};h.intersect=function(e,n,t,i,r){var s,a,f;h.vertLeq(e,n)||(f=e,e=n,n=f),h.vertLeq(t,i)||(f=t,t=i,i=f),h.vertLeq(e,t)||(f=e,e=t,t=f,f=n,n=i,i=f),h.vertLeq(t,n)?h.vertLeq(n,i)?(s=h.edgeEval(e,t,n),a=h.edgeEval(t,n,i),s+a<0&&(s=-s,a=-a),r.s=h.interpolate(s,t.s,a,n.s)):(s=h.edgeSign(e,t,n),a=-h.edgeSign(e,i,n),s+a<0&&(s=-s,a=-a),r.s=h.interpolate(s,t.s,a,i.s)):r.s=(t.s+n.s)/2,h.transLeq(e,n)||(f=e,e=n,n=f),h.transLeq(t,i)||(f=t,t=i,i=f),h.transLeq(e,t)||(f=e,e=t,t=f,f=n,n=i,i=f),h.transLeq(t,n)?h.transLeq(n,i)?(s=h.transEval(e,t,n),a=h.transEval(t,n,i),s+a<0&&(s=-s,a=-a),r.t=h.interpolate(s,t.t,a,n.t)):(s=h.transSign(e,t,n),a=-h.transSign(e,i,n),s+a<0&&(s=-s,a=-a),r.t=h.interpolate(s,t.t,a,i.t)):r.t=(t.t+n.t)/2};function Q(){this.key=null,this.next=null,this.prev=null}function Y(e,n){this.head=new Q,this.head.next=this.head,this.head.prev=this.head,this.frame=e,this.leq=n}Y.prototype={min:function(){return this.head.next},max:function(){return this.head.prev},insert:function(e){return this.insertBefore(this.head,e)},search:function(e){var n=this.head;do n=n.next;while(n.key!==null&&!this.leq(this.frame,e,n.key));return n},insertBefore:function(e,n){do e=e.prev;while(e.key!==null&&!this.leq(this.frame,e.key,n));var t=new Q;return t.key=n,t.next=e.next,e.next.prev=t,t.prev=e,e.next=t,t},delete:function(e){e.next.prev=e.prev,e.prev.next=e.next}};function j(){this.handle=null}function $(){this.key=null,this.node=null}function J(e,n){this.size=0,this.max=e,this.nodes=[],this.nodes.length=e+1;for(var t=0;t<this.nodes.length;t++)this.nodes[t]=new j;this.handles=[],this.handles.length=e+1;for(var t=0;t<this.handles.length;t++)this.handles[t]=new $;this.initialized=!1,this.freeList=0,this.leq=n,this.nodes[1].handle=1,this.handles[1].key=null}J.prototype={floatDown_:function(e){var n=this.nodes,t=this.handles,i,r,s;for(i=n[e].handle;;){if(s=e<<1,s<this.size&&this.leq(t[n[s+1].handle].key,t[n[s].handle].key)&&++s,d(s<=this.max),r=n[s].handle,s>this.size||this.leq(t[i].key,t[r].key)){n[e].handle=i,t[i].node=e;break}n[e].handle=r,t[r].node=e,e=s}},floatUp_:function(e){var n=this.nodes,t=this.handles,i,r,s;for(i=n[e].handle;;){if(s=e>>1,r=n[s].handle,s==0||this.leq(t[r].key,t[i].key)){n[e].handle=i,t[i].node=e;break}n[e].handle=r,t[r].node=e,e=s}},init:function(){for(var e=this.size;e>=1;--e)this.floatDown_(e);this.initialized=!0},min:function(){return this.handles[this.nodes[1].handle].key},isEmpty:function(){this.size},insert:function(e){var n,t;if(n=++this.size,n*2>this.max){this.max*=2;var i;i=this.nodes.length,this.nodes.length=this.max+1;for(var r=i;r<this.nodes.length;r++)this.nodes[r]=new j;i=this.handles.length,this.handles.length=this.max+1;for(var r=i;r<this.handles.length;r++)this.handles[r]=new $}return this.freeList===0?t=n:(t=this.freeList,this.freeList=this.handles[t].node),this.nodes[n].handle=t,this.handles[t].node=n,this.handles[t].key=e,this.initialized&&this.floatUp_(n),t},extractMin:function(){var e=this.nodes,n=this.handles,t=e[1].handle,i=n[t].key;return this.size>0&&(e[1].handle=e[this.size].handle,n[e[1].handle].node=1,n[t].key=null,n[t].node=this.freeList,this.freeList=t,--this.size,this.size>0&&this.floatDown_(1)),i},delete:function(e){var n=this.nodes,t=this.handles,i;d(e>=1&&e<=this.max&&t[e].key!==null),i=t[e].node,n[i].handle=n[this.size].handle,t[n[i].handle].node=i,--this.size,i<=this.size&&(i<=1||this.leq(t[n[i>>1].handle].key,t[n[i].handle].key)?this.floatDown_(i):this.floatUp_(i)),t[e].key=null,t[e].node=this.freeList,this.freeList=e}};function B(){this.eUp=null,this.nodeUp=null,this.windingNumber=0,this.inside=!1,this.sentinel=!1,this.dirty=!1,this.fixUpperEdge=!1}var l={};l.regionBelow=function(e){return e.nodeUp.prev.key};l.regionAbove=function(e){return e.nodeUp.next.key};l.debugEvent=function(e){};l.addWinding=function(e,n){e.winding+=n.winding,e.Sym.winding+=n.Sym.winding};l.edgeLeq=function(e,n,t){var i=e.event,a,f,r=n.eUp,s=t.eUp;if(r.Dst===i)return s.Dst===i?h.vertLeq(r.Org,s.Org)?h.edgeSign(s.Dst,r.Org,s.Org)<=0:h.edgeSign(r.Dst,s.Org,r.Org)>=0:h.edgeSign(s.Dst,i,s.Org)<=0;if(s.Dst===i)return h.edgeSign(r.Dst,i,r.Org)>=0;var a=h.edgeEval(r.Dst,i,r.Org),f=h.edgeEval(s.Dst,i,s.Org);return a>=f};l.deleteRegion=function(e,n){n.fixUpperEdge&&d(n.eUp.winding===0),n.eUp.activeRegion=null,e.dict.delete(n.nodeUp)};l.fixUpperEdge=function(e,n,t){d(n.fixUpperEdge),e.mesh.delete(n.eUp),n.fixUpperEdge=!1,n.eUp=t,t.activeRegion=n};l.topLeftRegion=function(e,n){var t=n.eUp.Org,i;do n=l.regionAbove(n);while(n.eUp.Org===t);if(n.fixUpperEdge){if(i=e.mesh.connect(l.regionBelow(n).eUp.Sym,n.eUp.Lnext),i===null)return null;l.fixUpperEdge(e,n,i),n=l.regionAbove(n)}return n};l.topRightRegion=function(t){var n=t.eUp.Dst,t=null;do t=l.regionAbove(t);while(t.eUp.Dst===n);return t};l.addRegionBelow=function(e,n,t){var i=new B;return i.eUp=t,i.nodeUp=e.dict.insertBefore(n.nodeUp,i),i.fixUpperEdge=!1,i.sentinel=!1,i.dirty=!1,t.activeRegion=i,i};l.isWindingInside=function(e,n){switch(e.windingRule){case E.WINDING_ODD:return(n&1)!=0;case E.WINDING_NONZERO:return n!=0;case E.WINDING_POSITIVE:return n>0;case E.WINDING_NEGATIVE:return n<0;case E.WINDING_ABS_GEQ_TWO:return n>=2||n<=-2}return d(!1),!1};l.computeWinding=function(e,n){n.windingNumber=l.regionAbove(n).windingNumber+n.eUp.winding,n.inside=l.isWindingInside(e,n.windingNumber)};l.finishRegion=function(e,n){var t=n.eUp,i=t.Lface;i.inside=n.inside,i.anEdge=t,l.deleteRegion(e,n)};l.finishLeftRegions=function(e,n,t){for(var i,a,r=null,s=n,a=n.eUp;s!==t;){if(s.fixUpperEdge=!1,r=l.regionBelow(s),i=r.eUp,i.Org!=a.Org){if(!r.fixUpperEdge){l.finishRegion(e,s);break}i=e.mesh.connect(a.Lprev,i.Sym),l.fixUpperEdge(e,r,i)}a.Onext!==i&&(e.mesh.splice(i.Oprev,i),e.mesh.splice(a,i)),l.finishRegion(e,s),a=r.eUp,s=r}return a};l.addRightEdges=function(e,n,t,i,r,s){var a,f,o,u,x=!0;o=t;do d(h.vertLeq(o.Org,o.Dst)),l.addRegionBelow(e,n,o.Sym),o=o.Onext;while(o!==i);for(r===null&&(r=l.regionBelow(n).eUp.Rprev),f=n,u=r;a=l.regionBelow(f),o=a.eUp.Sym,o.Org===u.Org;)o.Onext!==u&&(e.mesh.splice(o.Oprev,o),e.mesh.splice(u.Oprev,o)),a.windingNumber=f.windingNumber-o.winding,a.inside=l.isWindingInside(e,a.windingNumber),f.dirty=!0,!x&&l.checkForRightSplice(e,f)&&(l.addWinding(o,u),l.deleteRegion(e,f),e.mesh.delete(u)),x=!1,f=a,u=o;f.dirty=!0,d(f.windingNumber-o.winding===a.windingNumber),s&&l.walkDirtyRegions(e,f)};l.spliceMergeVertices=function(e,n,t){e.mesh.splice(n,t)};l.vertexWeights=function(e,n,t){var i=h.vertL1dist(n,e),r=h.vertL1dist(t,e),s=.5*r/(i+r),a=.5*i/(i+r);e.coords[0]+=s*n.coords[0]+a*t.coords[0],e.coords[1]+=s*n.coords[1]+a*t.coords[1],e.coords[2]+=s*n.coords[2]+a*t.coords[2]};l.getIntersectData=function(e,n,t,i,r,s){n.coords[0]=n.coords[1]=n.coords[2]=0,n.idx=-1,l.vertexWeights(n,t,i),l.vertexWeights(n,r,s)};l.checkForRightSplice=function(e,n){var t=l.regionBelow(n),i=n.eUp,r=t.eUp;if(h.vertLeq(i.Org,r.Org)){if(h.edgeSign(r.Dst,i.Org,r.Org)>0)return!1;h.vertEq(i.Org,r.Org)?i.Org!==r.Org&&(e.pq.delete(i.Org.pqHandle),l.spliceMergeVertices(e,r.Oprev,i)):(e.mesh.splitEdge(r.Sym),e.mesh.splice(i,r.Oprev),n.dirty=t.dirty=!0)}else{if(h.edgeSign(i.Dst,r.Org,i.Org)<0)return!1;l.regionAbove(n).dirty=n.dirty=!0,e.mesh.splitEdge(i.Sym),e.mesh.splice(r.Oprev,i)}return!0};l.checkForLeftSplice=function(e,n){var t=l.regionBelow(n),i=n.eUp,r=t.eUp,s;if(d(!h.vertEq(i.Dst,r.Dst)),h.vertLeq(i.Dst,r.Dst)){if(h.edgeSign(i.Dst,r.Dst,i.Org)<0)return!1;l.regionAbove(n).dirty=n.dirty=!0,s=e.mesh.splitEdge(i),e.mesh.splice(r.Sym,s),s.Lface.inside=n.inside}else{if(h.edgeSign(r.Dst,i.Dst,r.Org)>0)return!1;n.dirty=t.dirty=!0,s=e.mesh.splitEdge(r),e.mesh.splice(i.Lnext,r.Sym),s.Rface.inside=n.inside}return!0};l.checkForIntersect=function(e,n){var t=l.regionBelow(n),i=n.eUp,r=t.eUp,s=i.Org,a=r.Org,f=i.Dst,o=r.Dst,u,x,v=new S,c,L;if(d(!h.vertEq(o,f)),d(h.edgeSign(f,e.event,s)<=0),d(h.edgeSign(o,e.event,a)>=0),d(s!==e.event&&a!==e.event),d(!n.fixUpperEdge&&!t.fixUpperEdge),s===a||(u=Math.min(s.t,f.t),x=Math.max(a.t,o.t),u>x))return!1;if(h.vertLeq(s,a)){if(h.edgeSign(o,s,a)>0)return!1}else if(h.edgeSign(f,a,s)<0)return!1;return l.debugEvent(e),h.intersect(f,s,o,a,v),d(Math.min(s.t,f.t)<=v.t),d(v.t<=Math.max(a.t,o.t)),d(Math.min(o.s,f.s)<=v.s),d(v.s<=Math.max(a.s,s.s)),h.vertLeq(v,e.event)&&(v.s=e.event.s,v.t=e.event.t),c=h.vertLeq(s,a)?s:a,h.vertLeq(c,v)&&(v.s=c.s,v.t=c.t),h.vertEq(v,s)||h.vertEq(v,a)?(l.checkForRightSplice(e,n),!1):!h.vertEq(f,e.event)&&h.edgeSign(f,e.event,v)>=0||!h.vertEq(o,e.event)&&h.edgeSign(o,e.event,v)<=0?o===e.event?(e.mesh.splitEdge(i.Sym),e.mesh.splice(r.Sym,i),n=l.topLeftRegion(e,n),i=l.regionBelow(n).eUp,l.finishLeftRegions(e,l.regionBelow(n),t),l.addRightEdges(e,n,i.Oprev,i,i,!0),TRUE):f===e.event?(e.mesh.splitEdge(r.Sym),e.mesh.splice(i.Lnext,r.Oprev),t=n,n=l.topRightRegion(n),L=l.regionBelow(n).eUp.Rprev,t.eUp=r.Oprev,r=l.finishLeftRegions(e,t,null),l.addRightEdges(e,n,r.Onext,i.Rprev,L,!0),!0):(h.edgeSign(f,e.event,v)>=0&&(l.regionAbove(n).dirty=n.dirty=!0,e.mesh.splitEdge(i.Sym),i.Org.s=e.event.s,i.Org.t=e.event.t),h.edgeSign(o,e.event,v)<=0&&(n.dirty=t.dirty=!0,e.mesh.splitEdge(r.Sym),r.Org.s=e.event.s,r.Org.t=e.event.t),!1):(e.mesh.splitEdge(i.Sym),e.mesh.splitEdge(r.Sym),e.mesh.splice(r.Oprev,i),i.Org.s=v.s,i.Org.t=v.t,i.Org.pqHandle=e.pq.insert(i.Org),l.getIntersectData(e,i.Org,s,f,a,o),l.regionAbove(n).dirty=n.dirty=t.dirty=!0,!1)};l.walkDirtyRegions=function(e,n){for(var t=l.regionBelow(n),i,r;;){for(;t.dirty;)n=t,t=l.regionBelow(t);if(!n.dirty&&(t=n,n=l.regionAbove(n),n==null||!n.dirty))return;if(n.dirty=!1,i=n.eUp,r=t.eUp,i.Dst!==r.Dst&&l.checkForLeftSplice(e,n)&&(t.fixUpperEdge?(l.deleteRegion(e,t),e.mesh.delete(r),t=l.regionBelow(n),r=t.eUp):n.fixUpperEdge&&(l.deleteRegion(e,n),e.mesh.delete(i),n=l.regionAbove(t),i=n.eUp)),i.Org!==r.Org)if(i.Dst!==r.Dst&&!n.fixUpperEdge&&!t.fixUpperEdge&&(i.Dst===e.event||r.Dst===e.event)){if(l.checkForIntersect(e,n))return}else l.checkForRightSplice(e,n);i.Org===r.Org&&i.Dst===r.Dst&&(l.addWinding(r,i),l.deleteRegion(e,n),e.mesh.delete(i),n=l.regionAbove(t))}};l.connectRightVertex=function(e,n,t){var i,r=t.Onext,s=l.regionBelow(n),a=n.eUp,f=s.eUp,o=!1;if(a.Dst!==f.Dst&&l.checkForIntersect(e,n),h.vertEq(a.Org,e.event)&&(e.mesh.splice(r.Oprev,a),n=l.topLeftRegion(e,n),r=l.regionBelow(n).eUp,l.finishLeftRegions(e,l.regionBelow(n),s),o=!0),h.vertEq(f.Org,e.event)&&(e.mesh.splice(t,f.Oprev),t=l.finishLeftRegions(e,s,null),o=!0),o){l.addRightEdges(e,n,t.Onext,r,r,!0);return}h.vertLeq(f.Org,a.Org)?i=f.Oprev:i=a,i=e.mesh.connect(t.Lprev,i),l.addRightEdges(e,n,i,i.Onext,i.Onext,!1),i.Sym.activeRegion.fixUpperEdge=!0,l.walkDirtyRegions(e,n)};l.connectLeftDegenerate=function(e,n,t){var i,r,s,a,f;if(i=n.eUp,h.vertEq(i.Org,t)){d(!1),l.spliceMergeVertices(e,i,t.anEdge);return}if(!h.vertEq(i.Dst,t)){e.mesh.splitEdge(i.Sym),n.fixUpperEdge&&(e.mesh.delete(i.Onext),n.fixUpperEdge=!1),e.mesh.splice(t.anEdge,i),l.sweepEvent(e,t);return}d(!1),n=l.topRightRegion(n),f=l.regionBelow(n),s=f.eUp.Sym,r=a=s.Onext,f.fixUpperEdge&&(d(r!==s),l.deleteRegion(e,f),e.mesh.delete(s),s=r.Oprev),e.mesh.splice(t.anEdge,s),h.edgeGoesLeft(r)||(r=null),l.addRightEdges(e,n,s.Onext,a,r,!0)};l.connectLeftVertex=function(e,n){var t,i,r,s,a,f,o=new B;if(o.eUp=n.anEdge.Sym,t=e.dict.search(o).key,i=l.regionBelow(t),!!i){if(s=t.eUp,a=i.eUp,h.edgeSign(s.Dst,n,s.Org)===0){l.connectLeftDegenerate(e,t,n);return}if(r=h.vertLeq(a.Dst,s.Dst)?t:i,t.inside||r.fixUpperEdge){if(r===t)f=e.mesh.connect(n.anEdge.Sym,s.Lnext);else{var u=e.mesh.connect(a.Dnext,n.anEdge);f=u.Sym}r.fixUpperEdge?l.fixUpperEdge(e,r,f):l.computeWinding(e,l.addRegionBelow(e,t,f)),l.sweepEvent(e,n)}else l.addRightEdges(e,t,n.anEdge,n.anEdge,null,!0)}};l.sweepEvent=function(e,n){e.event=n,l.debugEvent(e);for(var t=n.anEdge;t.activeRegion===null;)if(t=t.Onext,t==n.anEdge){l.connectLeftVertex(e,n);return}var i=l.topLeftRegion(e,t.activeRegion);d(i!==null);var r=l.regionBelow(i),s=r.eUp,a=l.finishLeftRegions(e,r,null);a.Onext===s?l.connectRightVertex(e,i,a):l.addRightEdges(e,i,a.Onext,s,s,!0)};l.addSentinel=function(e,n,t,i){var r=new B,s=e.mesh.makeEdge();s.Org.s=t,s.Org.t=i,s.Dst.s=n,s.Dst.t=i,e.event=s.Dst,r.eUp=s,r.windingNumber=0,r.inside=!1,r.fixUpperEdge=!1,r.sentinel=!0,r.dirty=!1,r.nodeUp=e.dict.insert(r)};l.initEdgeDict=function(e){e.dict=new Y(e,l.edgeLeq);var n=e.bmax[0]-e.bmin[0],t=e.bmax[1]-e.bmin[1],i=e.bmin[0]-n,r=e.bmax[0]+n,s=e.bmin[1]-t,a=e.bmax[1]+t;l.addSentinel(e,i,r,s),l.addSentinel(e,i,r,a)};l.doneEdgeDict=function(e){for(var n,t=0;(n=e.dict.min().key)!==null;)n.sentinel||(d(n.fixUpperEdge),d(++t==1)),d(n.windingNumber==0),l.deleteRegion(e,n)};l.removeDegenerateEdges=function(e){var n,t,i,r=e.mesh.eHead;for(n=r.next;n!==r;n=t)t=n.next,i=n.Lnext,h.vertEq(n.Org,n.Dst)&&n.Lnext.Lnext!==n&&(l.spliceMergeVertices(e,i,n),e.mesh.delete(n),n=i,i=n.Lnext),i.Lnext===n&&(i!==n&&((i===t||i===t.Sym)&&(t=t.next),e.mesh.delete(i)),(n===t||n===t.Sym)&&(t=t.next),e.mesh.delete(n))};l.initPriorityQ=function(e){var n,t,i,r=0;for(i=e.mesh.vHead,t=i.next;t!==i;t=t.next)r++;for(r+=8,n=e.pq=new J(r,h.vertLeq),i=e.mesh.vHead,t=i.next;t!==i;t=t.next)t.pqHandle=n.insert(t);return t!==i?!1:(n.init(),!0)};l.donePriorityQ=function(e){e.pq=null};l.removeDegenerateFaces=function(e,n){var t,i,r;for(t=n.fHead.next;t!==n.fHead;t=i)i=t.next,r=t.anEdge,d(r.Lnext!==r),r.Lnext.Lnext===r&&(l.addWinding(r.Onext,r),e.mesh.delete(r));return!0};l.computeInterior=function(e){var n,t;if(l.removeDegenerateEdges(e),!l.initPriorityQ(e))return!1;for(l.initEdgeDict(e);(n=e.pq.extractMin())!==null;){for(;t=e.pq.min(),!(t===null||!h.vertEq(t,n));)t=e.pq.extractMin(),l.spliceMergeVertices(e,n.anEdge,t.anEdge);l.sweepEvent(e,n)}return e.event=e.dict.min().key.eUp.Org,l.debugEvent(e),l.doneEdgeDict(e),l.donePriorityQ(e),l.removeDegenerateFaces(e,e.mesh)?(e.mesh.check(),!0):!1};function K(){this.mesh=null,this.normal=[0,0,0],this.sUnit=[0,0,0],this.tUnit=[0,0,0],this.bmin=[0,0],this.bmax=[0,0],this.windingRule=E.WINDING_ODD,this.dict=null,this.pq=null,this.event=null,this.vertexIndexCounter=0,this.vertices=[],this.vertexIndices=[],this.vertexCount=0,this.elements=[],this.elementCount=0}K.prototype={dot_:function(e,n){return e[0]*n[0]+e[1]*n[1]+e[2]*n[2]},normalize_:function(e){var n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2];d(n>0),n=Math.sqrt(n),e[0]/=n,e[1]/=n,e[2]/=n},longAxis_:function(e){var n=0;return Math.abs(e[1])>Math.abs(e[0])&&(n=1),Math.abs(e[2])>Math.abs(e[n])&&(n=2),n},computeNormal_:function(e){var n,t,i,r,s,a,f=[0,0,0],o=[0,0,0],u=[0,0,0],x=[0,0,0],v=[0,0,0],c=[null,null,null],L=[null,null,null],p=this.mesh.vHead,g;for(n=p.next,g=0;g<3;++g)r=n.coords[g],o[g]=r,L[g]=n,f[g]=r,c[g]=n;for(n=p.next;n!==p;n=n.next)for(g=0;g<3;++g)r=n.coords[g],r<o[g]&&(o[g]=r,L[g]=n),r>f[g]&&(f[g]=r,c[g]=n);if(g=0,f[1]-o[1]>f[0]-o[0]&&(g=1),f[2]-o[2]>f[g]-o[g]&&(g=2),o[g]>=f[g]){e[0]=0,e[1]=0,e[2]=1;return}for(a=0,t=L[g],i=c[g],u[0]=t.coords[0]-i.coords[0],u[1]=t.coords[1]-i.coords[1],u[2]=t.coords[2]-i.coords[2],n=p.next;n!==p;n=n.next)x[0]=n.coords[0]-i.coords[0],x[1]=n.coords[1]-i.coords[1],x[2]=n.coords[2]-i.coords[2],v[0]=u[1]*x[2]-u[2]*x[1],v[1]=u[2]*x[0]-u[0]*x[2],v[2]=u[0]*x[1]-u[1]*x[0],s=v[0]*v[0]+v[1]*v[1]+v[2]*v[2],s>a&&(a=s,e[0]=v[0],e[1]=v[1],e[2]=v[2]);a<=0&&(e[0]=e[1]=e[2]=0,e[this.longAxis_(u)]=1)},checkOrientation_:function(){var e,n,t=this.mesh.fHead,i,r=this.mesh.vHead,s;for(e=0,n=t.next;n!==t;n=n.next)if(s=n.anEdge,!(s.winding<=0))do e+=(s.Org.s-s.Dst.s)*(s.Org.t+s.Dst.t),s=s.Lnext;while(s!==n.anEdge);if(e<0){for(i=r.next;i!==r;i=i.next)i.t=-i.t;this.tUnit[0]=-this.tUnit[0],this.tUnit[1]=-this.tUnit[1],this.tUnit[2]=-this.tUnit[2]}},projectPolygon_:function(){var e,n=this.mesh.vHead,t=[0,0,0],i,r,s,a,f=!1;for(t[0]=this.normal[0],t[1]=this.normal[1],t[2]=this.normal[2],t[0]===0&&t[1]===0&&t[2]===0&&(this.computeNormal_(t),f=!0),i=this.sUnit,r=this.tUnit,s=this.longAxis_(t),i[s]=0,i[(s+1)%3]=1,i[(s+2)%3]=0,r[s]=0,r[(s+1)%3]=0,r[(s+2)%3]=t[s]>0?1:-1,e=n.next;e!==n;e=e.next)e.s=this.dot_(e.coords,i),e.t=this.dot_(e.coords,r);for(f&&this.checkOrientation_(),a=!0,e=n.next;e!==n;e=e.next)a?(this.bmin[0]=this.bmax[0]=e.s,this.bmin[1]=this.bmax[1]=e.t,a=!1):(e.s<this.bmin[0]&&(this.bmin[0]=e.s),e.s>this.bmax[0]&&(this.bmax[0]=e.s),e.t<this.bmin[1]&&(this.bmin[1]=e.t),e.t>this.bmax[1]&&(this.bmax[1]=e.t))},addWinding_:function(e,n){e.winding+=n.winding,e.Sym.winding+=n.Sym.winding},tessellateMonoRegion_:function(e,n){var t,i;for(t=n.anEdge,d(t.Lnext!==t&&t.Lnext.Lnext!==t);h.vertLeq(t.Dst,t.Org);t=t.Lprev);for(;h.vertLeq(t.Org,t.Dst);t=t.Lnext);for(i=t.Lprev;t.Lnext!==i;)if(h.vertLeq(t.Dst,i.Org)){for(;i.Lnext!==t&&(h.edgeGoesLeft(i.Lnext)||h.edgeSign(i.Org,i.Dst,i.Lnext.Dst)<=0);){var r=e.connect(i.Lnext,i);i=r.Sym}i=i.Lprev}else{for(;i.Lnext!=t&&(h.edgeGoesRight(t.Lprev)||h.edgeSign(t.Dst,t.Org,t.Lprev.Org)>=0);){var r=e.connect(t,t.Lprev);t=r.Sym}t=t.Lnext}for(d(i.Lnext!==t);i.Lnext.Lnext!==t;){var r=e.connect(i.Lnext,i);i=r.Sym}return!0},tessellateInterior_:function(e){var n,t;for(n=e.fHead.next;n!==e.fHead;n=t)if(t=n.next,n.inside&&!this.tessellateMonoRegion_(e,n))return!1;return!0},discardExterior_:function(e){var n,t;for(n=e.fHead.next;n!==e.fHead;n=t)t=n.next,n.inside||e.zapFace(n)},setWindingNumber_:function(e,n,t){var i,r;for(i=e.eHead.next;i!==e.eHead;i=r)r=i.next,i.Rface.inside!==i.Lface.inside?i.winding=i.Lface.inside?n:-n:t?e.delete(i):i.winding=0},getNeighbourFace_:function(e){return!e.Rface||!e.Rface.inside?-1:e.Rface.n},outputPolymesh_:function(e,n,t,i){var r,s,a,f=0,o=0,u,x;for(t>3&&e.mergeConvexFaces(t),r=e.vHead.next;r!==e.vHead;r=r.next)r.n=-1;for(s=e.fHead.next;s!=e.fHead;s=s.next)if(s.n=-1,!!s.inside){a=s.anEdge,u=0;do r=a.Org,r.n===-1&&(r.n=o,o++),u++,a=a.Lnext;while(a!==s.anEdge);d(u<=t),s.n=f,++f}for(this.elementCount=f,n==E.CONNECTED_POLYGONS&&(f*=2),this.elements=[],this.elements.length=f*t,this.vertexCount=o,this.vertices=[],this.vertices.length=o*i,this.vertexIndices=[],this.vertexIndices.length=o,r=e.vHead.next;r!==e.vHead;r=r.next)if(r.n!=-1){var v=r.n*i;this.vertices[v+0]=r.coords[0],this.vertices[v+1]=r.coords[1],i>2&&(this.vertices[v+2]=r.coords[2]),this.vertexIndices[r.n]=r.idx}var c=0;for(s=e.fHead.next;s!==e.fHead;s=s.next)if(s.inside){a=s.anEdge,u=0;do r=a.Org,this.elements[c++]=r.n,u++,a=a.Lnext;while(a!==s.anEdge);for(x=u;x<t;++x)this.elements[c++]=-1;if(n==E.CONNECTED_POLYGONS){a=s.anEdge;do this.elements[c++]=this.getNeighbourFace_(a),a=a.Lnext;while(a!==s.anEdge);for(x=u;x<t;++x)this.elements[c++]=-1}}},outputContours_:function(e,n){var t,i,r,s=0,a=0;for(this.vertexCount=0,this.elementCount=0,t=e.fHead.next;t!==e.fHead;t=t.next)if(t.inside){r=i=t.anEdge;do this.vertexCount++,i=i.Lnext;while(i!==r);this.elementCount++}this.elements=[],this.elements.length=this.elementCount*2,this.vertices=[],this.vertices.length=this.vertexCount*n,this.vertexIndices=[],this.vertexIndices.length=this.vertexCount;var f=0,o=0,u=0;for(s=0,t=e.fHead.next;t!==e.fHead;t=t.next)if(t.inside){a=0,r=i=t.anEdge;do this.vertices[f++]=i.Org.coords[0],this.vertices[f++]=i.Org.coords[1],n>2&&(this.vertices[f++]=i.Org.coords[2]),this.vertexIndices[o++]=i.Org.idx,a++,i=i.Lnext;while(i!==r);this.elements[u++]=s,this.elements[u++]=a,s+=a}},addContour:function(e,n){var t,i;for(this.mesh===null&&(this.mesh=new z),e<2&&(e=2),e>3&&(e=3),t=null,i=0;i<n.length;i+=e)t==null?(t=this.mesh.makeEdge(),this.mesh.splice(t,t.Sym)):(this.mesh.splitEdge(t),t=t.Lnext),t.Org.coords[0]=n[i+0],t.Org.coords[1]=n[i+1],e>2?t.Org.coords[2]=n[i+2]:t.Org.coords[2]=0,t.Org.idx=this.vertexIndexCounter++,t.winding=1,t.Sym.winding=-1},tesselate:function(e,n,t,i,r){if(this.vertices=[],this.elements=[],this.vertexIndices=[],this.vertexIndexCounter=0,r&&(this.normal[0]=r[0],this.normal[1]=r[1],this.normal[2]=r[2]),this.windingRule=e,i<2&&(i=2),i>3&&(i=3),!this.mesh)return!1;this.projectPolygon_(),l.computeInterior(this);var s=this.mesh;return n==E.BOUNDARY_CONTOURS?this.setWindingNumber_(s,1,!0):this.tessellateInterior_(s),s.check(),n==E.BOUNDARY_CONTOURS?this.outputContours_(s,i):this.outputPolymesh_(s,n,t,i),!0}};var V=ie,G={exports:{}};G.exports=C;G.exports.default=C;function C(e,n,t){t=t||2;var i=n&&n.length,r=i?n[0]*t:e.length,s=X(e,0,r,t,!0),a=[];if(!s||s.next===s.prev)return a;var f,o,u,x,v,c,L;if(i&&(s=le(e,n,s,t)),e.length>80*t){f=u=e[0],o=x=e[1];for(var p=t;p<r;p+=t)v=e[p],c=e[p+1],v<f&&(f=v),c<o&&(o=c),v>u&&(u=v),c>x&&(x=c);L=Math.max(u-f,x-o),L=L!==0?32767/L:0}return N(s,a,t,f,o,L,0),a}function X(e,n,t,i,r){var s,a;if(r===W(e,n,t,i)>0)for(s=n;s<t;s+=i)a=T(s,e[s],e[s+1],a);else for(s=t-i;s>=n;s-=i)a=T(s,e[s],e[s+1],a);return a&&U(a,a.next)&&(H(a),a=a.next),a}function w(e,n){if(!e)return e;n||(n=e);var t=e,i;do if(i=!1,!t.steiner&&(U(t,t.next)||O(t.prev,t,t.next)===0)){if(H(t),t=n=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==n);return n}function N(e,n,t,i,r,s,a){if(e){!a&&s&&de(e,i,r,s);for(var f=e,o,u;e.prev!==e.next;){if(o=e.prev,u=e.next,s?se(e,i,r,s):re(e)){n.push(o.i/t|0),n.push(e.i/t|0),n.push(u.i/t|0),H(e),e=u.next,f=u.next;continue}if(e=u,e===f){a?a===1?(e=ae(w(e),n,t),N(e,n,t,i,r,s,2)):a===2&&fe(e,n,t,i,r,s):N(w(e),n,t,i,r,s,1);break}}}}function re(e){var n=e.prev,t=e,i=e.next;if(O(n,t,i)>=0)return!1;for(var r=n.x,s=t.x,a=i.x,f=n.y,o=t.y,u=i.y,x=r<s?r<a?r:a:s<a?s:a,v=f<o?f<u?f:u:o<u?o:u,c=r>s?r>a?r:a:s>a?s:a,L=f>o?f>u?f:u:o>u?o:u,p=i.next;p!==n;){if(p.x>=x&&p.x<=c&&p.y>=v&&p.y<=L&&R(r,f,s,o,a,u,p.x,p.y)&&O(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function se(e,n,t,i){var r=e.prev,s=e,a=e.next;if(O(r,s,a)>=0)return!1;for(var f=r.x,o=s.x,u=a.x,x=r.y,v=s.y,c=a.y,L=f<o?f<u?f:u:o<u?o:u,p=x<v?x<c?x:c:v<c?v:c,g=f>o?f>u?f:u:o>u?o:u,_=x>v?x>c?x:c:v>c?v:c,Z=M(L,p,n,t,i),A=M(g,_,n,t,i),m=e.prevZ,y=e.nextZ;m&&m.z>=Z&&y&&y.z<=A;){if(m.x>=L&&m.x<=g&&m.y>=p&&m.y<=_&&m!==r&&m!==a&&R(f,x,o,v,u,c,m.x,m.y)&&O(m.prev,m,m.next)>=0||(m=m.prevZ,y.x>=L&&y.x<=g&&y.y>=p&&y.y<=_&&y!==r&&y!==a&&R(f,x,o,v,u,c,y.x,y.y)&&O(y.prev,y,y.next)>=0))return!1;y=y.nextZ}for(;m&&m.z>=Z;){if(m.x>=L&&m.x<=g&&m.y>=p&&m.y<=_&&m!==r&&m!==a&&R(f,x,o,v,u,c,m.x,m.y)&&O(m.prev,m,m.next)>=0)return!1;m=m.prevZ}for(;y&&y.z<=A;){if(y.x>=L&&y.x<=g&&y.y>=p&&y.y<=_&&y!==r&&y!==a&&R(f,x,o,v,u,c,y.x,y.y)&&O(y.prev,y,y.next)>=0)return!1;y=y.nextZ}return!0}function ae(e,n,t){var i=e;do{var r=i.prev,s=i.next.next;!U(r,s)&&ee(r,i,i.next,s)&&q(r,s)&&q(s,r)&&(n.push(r.i/t|0),n.push(i.i/t|0),n.push(s.i/t|0),H(i),H(i.next),i=e=s),i=i.next}while(i!==e);return w(i)}function fe(e,n,t,i,r,s){var a=e;do{for(var f=a.next.next;f!==a.prev;){if(a.i!==f.i&&ge(a,f)){var o=ne(a,f);a=w(a,a.next),o=w(o,o.next),N(a,n,t,i,r,s,0),N(o,n,t,i,r,s,0);return}f=f.next}a=a.next}while(a!==e)}function le(e,n,t,i){var r=[],s,a,f,o,u;for(s=0,a=n.length;s<a;s++)f=n[s]*i,o=s<a-1?n[s+1]*i:e.length,u=X(e,f,o,i,!1),u===u.next&&(u.steiner=!0),r.push(ce(u));for(r.sort(oe),s=0;s<r.length;s++)t=he(r[s],t);return t}function oe(e,n){return e.x-n.x}function he(e,n){var t=ue(e,n);if(!t)return n;var i=ne(t,e);return w(i,i.next),w(t,t.next)}function ue(e,n){var t=n,i=e.x,r=e.y,s=-1/0,a;do{if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){var f=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(f<=i&&f>s&&(s=f,a=t.x<t.next.x?t:t.next,f===i))return a}t=t.next}while(t!==n);if(!a)return null;var o=a,u=a.x,x=a.y,v=1/0,c;t=a;do i>=t.x&&t.x>=u&&i!==t.x&&R(r<x?i:s,r,u,x,r<x?s:i,r,t.x,t.y)&&(c=Math.abs(r-t.y)/(i-t.x),q(t,e)&&(c<v||c===v&&(t.x>a.x||t.x===a.x&&ve(a,t)))&&(a=t,v=c)),t=t.next;while(t!==o);return a}function ve(e,n){return O(e.prev,e,n.prev)<0&&O(n.next,e,e.next)<0}function de(e,n,t,i){var r=e;do r.z===0&&(r.z=M(r.x,r.y,n,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,xe(r)}function xe(e){var n,t,i,r,s,a,f,o,u=1;do{for(t=e,e=null,s=null,a=0;t;){for(a++,i=t,f=0,n=0;n<u&&(f++,i=i.nextZ,!!i);n++);for(o=u;f>0||o>0&&i;)f!==0&&(o===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,f--):(r=i,i=i.nextZ,o--),s?s.nextZ=r:e=r,r.prevZ=s,s=r;t=i}s.nextZ=null,u*=2}while(a>1);return e}function M(e,n,t,i,r){return e=(e-t)*r|0,n=(n-i)*r|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e|n<<1}function ce(e){var n=e,t=e;do(n.x<t.x||n.x===t.x&&n.y<t.y)&&(t=n),n=n.next;while(n!==e);return t}function R(e,n,t,i,r,s,a,f){return(r-a)*(n-f)>=(e-a)*(s-f)&&(e-a)*(i-f)>=(t-a)*(n-f)&&(t-a)*(s-f)>=(r-a)*(i-f)}function ge(e,n){return e.next.i!==n.i&&e.prev.i!==n.i&&!pe(e,n)&&(q(e,n)&&q(n,e)&&me(e,n)&&(O(e.prev,e,n.prev)||O(e,n.prev,n))||U(e,n)&&O(e.prev,e,e.next)>0&&O(n.prev,n,n.next)>0)}function O(e,n,t){return(n.y-e.y)*(t.x-n.x)-(n.x-e.x)*(t.y-n.y)}function U(e,n){return e.x===n.x&&e.y===n.y}function ee(e,n,t,i){var r=F(O(e,n,t)),s=F(O(e,n,i)),a=F(O(t,i,e)),f=F(O(t,i,n));return!!(r!==s&&a!==f||r===0&&I(e,t,n)||s===0&&I(e,i,n)||a===0&&I(t,e,i)||f===0&&I(t,n,i))}function I(e,n,t){return n.x<=Math.max(e.x,t.x)&&n.x>=Math.min(e.x,t.x)&&n.y<=Math.max(e.y,t.y)&&n.y>=Math.min(e.y,t.y)}function F(e){return e>0?1:e<0?-1:0}function pe(e,n){var t=e;do{if(t.i!==e.i&&t.next.i!==e.i&&t.i!==n.i&&t.next.i!==n.i&&ee(t,t.next,e,n))return!0;t=t.next}while(t!==e);return!1}function q(e,n){return O(e.prev,e,e.next)<0?O(e,n,e.next)>=0&&O(e,e.prev,n)>=0:O(e,n,e.prev)<0||O(e,e.next,n)<0}function me(e,n){var t=e,i=!1,r=(e.x+n.x)/2,s=(e.y+n.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==e);return i}function ne(e,n){var t=new P(e.i,e.x,e.y),i=new P(n.i,n.x,n.y),r=e.next,s=n.prev;return e.next=n,n.prev=e,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function T(e,n,t,i){var r=new P(e,n,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function H(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function P(e,n,t){this.i=e,this.x=n,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}C.deviation=function(e,n,t,i){var r=n&&n.length,s=r?n[0]*t:e.length,a=Math.abs(W(e,0,s,t));if(r)for(var f=0,o=n.length;f<o;f++){var u=n[f]*t,x=f<o-1?n[f+1]*t:e.length;a-=Math.abs(W(e,u,x,t))}var v=0;for(f=0;f<i.length;f+=3){var c=i[f]*t,L=i[f+1]*t,p=i[f+2]*t;v+=Math.abs((e[c]-e[p])*(e[L+1]-e[c+1])-(e[c]-e[L])*(e[p+1]-e[c+1]))}return a===0&&v===0?0:Math.abs((v-a)/a)};function W(e,n,t,i){for(var r=0,s=n,a=t-i;s<t;s+=i)r+=(e[a]-e[s])*(e[s+1]+e[a+1]),a=s;return r}C.flatten=function(e){for(var n=e[0][0].length,t={vertices:[],holes:[],dimensions:n},i=0,r=0;r<e.length;r++){for(var s=0;s<e[r].length;s++)for(var a=0;a<n;a++)t.vertices.push(e[r][s][a]);r>0&&(i+=e[r-1].length,t.holes.push(i))}return t};var ye=G.exports;const Le=te(ye);function Oe(e,n,t,i){const r=n.copy().minus(e),s=t.copy().minus(n),a=e.copy().minus(t),f=i.copy().minus(e),o=i.copy().minus(n),u=i.copy().minus(t),x=Math.sign(r.cross(f));let v=r.dot(f)/r.length**2;if(x===0&&v>=0&&v<=1)return!0;const c=Math.sign(s.cross(o));if(v=s.dot(o)/s.length**2,c===0&&v>=0&&v<=1)return!0;const L=Math.sign(a.cross(u));return v=a.dot(u)/a.length**2,L===0&&v>=0&&v<=1?!0:x===c&&c===L}function Se({vertices:e,cells:n},t){let i=!1;for(let r=0;r<n.length;r+=3){const s=new b(...e[n[r]]),a=new b(...e[n[r+1]]),f=new b(...e[n[r+2]]);if(Oe(s,a,f,t)){i=!0;break}}return i}function Re(e){return Le(e)}function _e(e,n=V.WINDING_ODD){const t=V.tesselate({contours:[e.flat()],windingRule:n,elementType:V.POLYGONS,polySize:3,vertexSize:2,strict:!1}),i=[];for(let r=0;r<t.elements.length;r+=3){const s=t.elements[r],a=t.elements[r+1],f=t.elements[r+2];i.push([[t.vertices[s*2],t.vertices[s*2+1]],[t.vertices[a*2],t.vertices[a*2+1]],[t.vertices[f*2],t.vertices[f*2+1]]])}return i}export{V as a,Re as e,Se as i,_e as t};
