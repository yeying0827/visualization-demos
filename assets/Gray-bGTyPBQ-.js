import{_ as S,k as v,f as F,l as G,q as f,s as _,u as w,o as I,c as y,b as m,F as k,g as L,m as h,n as R,t as T,p as q,a as z}from"./index-kUdbjN4z.js";import{t as E,g as M}from"./color-matrix-ThnoXl7S.js";const N=g=>(q("data-v-c7d4d57f"),g=g(),z(),g),O=N(()=>m("h3",null,"灰度化图片",-1)),P=["onClick"],V={__name:"Gray",setup(g){const D=[{name:"普通写法"},{name:"重构写法"},{name:"使用color-matrix优化"}],l=v(0),b=u=>{const t=new Image;return t.crossOrigin="anonymous",new Promise(a=>{t.onload=()=>{a(t)},t.src=u})},n=v(null);let r;F(()=>{r=n.value.getContext("2d"),p(l.value),G(l,()=>{p(l.value)})});const p=u=>{switch(u){case 0:console.log("case 0"),async function(){const t=await b(h),{width:a,height:o}=t;n.value.width=a,n.value.height=o,r.drawImage(t,0,0);const c=r.getImageData(0,0,a,o),s=c.data;for(let e=0;e<a*o*4;e+=4){const i=s[e],x=s[e+1],C=s[e+2],B=s[e+3],d=.2126*i+.7152*x+.0722*C;s[e]=d,s[e+1]=d,s[e+2]=d,s[e+3]=B}r.putImageData(c,0,0)}();break;case 1:console.log("case 1"),async function(){const t=await f(h),a=_(t);w(a,({r:o,g:c,b:s,a:e})=>{const i=.2126*o+.7152*c+.0722*s;return[i,i,i,e]}),n.value.width=a.width,n.value.height=a.height,r.putImageData(a,0,0)}();break;case 2:console.log("case 2"),async function(){const t=await f(h),a=_(t);w(a,({r:o,g:c,b:s,a:e})=>E([o,c,s,e],M(1))),n.value.width=a.width,n.value.height=a.height,r.putImageData(a,0,0)}();break}};return(u,t)=>(I(),y(k,null,[O,m("div",null,[(I(),y(k,null,L(D,(a,o)=>m("span",{class:R(["filter-type",{active:l.value===o}]),onClick:c=>l.value=o},T(a.name),11,P)),64))]),m("canvas",{ref_key:"canvasRef",ref:n,width:"0",height:"0"},null,512)],64))}},A=S(V,[["__scopeId","data-v-c7d4d57f"]]);export{A as default};
