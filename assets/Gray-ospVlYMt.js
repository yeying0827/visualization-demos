import{_ as S,y as v,f as z,z as E,D as f,E as _,H as w,o as I,c as y,b as m,F as D,u as F,B as h,A as G,t as L,p as R,a as T}from"./index-bF0I-6KF.js";import{t as j,g as A}from"./color-matrix-ThnoXl7S.js";const H=g=>(R("data-v-c7d4d57f"),g=g(),T(),g),M=H(()=>m("h3",null,"灰度化图片",-1)),N=["onClick"],O={__name:"Gray",setup(g){const k=[{name:"普通写法"},{name:"重构写法"},{name:"使用color-matrix优化"}],l=v(0),b=u=>{const t=new Image;return t.crossOrigin="anonymous",new Promise(a=>{t.onload=()=>{a(t)},t.src=u})},n=v(null);let r;z(()=>{r=n.value.getContext("2d"),p(l.value),E(l,()=>{p(l.value)})});const p=u=>{switch(u){case 0:console.log("case 0"),async function(){const t=await b(h),{width:a,height:o}=t;n.value.width=a,n.value.height=o,r.drawImage(t,0,0);const c=r.getImageData(0,0,a,o),s=c.data;for(let e=0;e<a*o*4;e+=4){const i=s[e],x=s[e+1],B=s[e+2],C=s[e+3],d=.2126*i+.7152*x+.0722*B;s[e]=d,s[e+1]=d,s[e+2]=d,s[e+3]=C}r.putImageData(c,0,0)}();break;case 1:console.log("case 1"),async function(){const t=await f(h),a=_(t);w(a,({r:o,g:c,b:s,a:e})=>{const i=.2126*o+.7152*c+.0722*s;return[i,i,i,e]}),n.value.width=a.width,n.value.height=a.height,r.putImageData(a,0,0)}();break;case 2:console.log("case 2"),async function(){const t=await f(h),a=_(t);w(a,({r:o,g:c,b:s,a:e})=>j([o,c,s,e],A(1))),n.value.width=a.width,n.value.height=a.height,r.putImageData(a,0,0)}();break}};return(u,t)=>(I(),y(D,null,[M,m("div",null,[(I(),y(D,null,F(k,(a,o)=>m("span",{class:G(["filter-type",{active:l.value===o}]),onClick:c=>l.value=o},L(a.name),11,N)),64))]),m("canvas",{ref_key:"canvasRef",ref:n,width:"0",height:"0"},null,512)],64))}},$=S(O,[["__scopeId","data-v-c7d4d57f"]]);export{$ as default};
