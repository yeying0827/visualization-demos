import{_ as S,k as p,f as F,l as G,q as _,s as f,v as w,o as I,c as b,b as u,F as y,g as L,m as d,n as R,t as T,p as q,a as z}from"./index-pk9eWFZd.js";import{t as E,g as M}from"./color-matrix-ThnoXl7S.js";const N=g=>(q("data-v-1690b5b3"),g=g(),z(),g),O=N(()=>u("h3",null,"灰度化图片",-1)),P=["onClick"],V={__name:"Gray",setup(g){const k=[{name:"普通写法"},{name:"重构写法"},{name:"使用color-matrix优化"}],l=p(0),D=m=>{const t=new Image;return t.crossOrigin="anonymous",new Promise(a=>{t.onload=()=>{a(t)},t.src=m})},n=p(null);let r;F(()=>{r=n.value.getContext("2d"),v(l.value),G(l,()=>{v(l.value)})});const v=m=>{switch(m){case 0:console.log("case 0"),async function(){const t=await D(d),{width:a,height:o}=t;n.value.width=a,n.value.height=o,r.drawImage(t,0,0);const c=r.getImageData(0,0,a,o),s=c.data;for(let e=0;e<a*o*4;e+=4){const i=s[e],x=s[e+1],C=s[e+2],B=s[e+3],h=.2126*i+.7152*x+.0722*C;s[e]=h,s[e+1]=h,s[e+2]=h,s[e+3]=B}r.putImageData(c,0,0)}();break;case 1:console.log("case 1"),async function(){const t=await _(d),a=f(t);w(a,({r:o,g:c,b:s,a:e})=>{const i=.2126*o+.7152*c+.0722*s;return[i,i,i,e]}),n.value.width=a.width,n.value.height=a.height,r.putImageData(a,0,0)}();break;case 2:console.log("case 2"),async function(){const t=await _(d),a=f(t);w(a,({r:o,g:c,b:s,a:e})=>E([o,c,s,e],M(1))),n.value.width=a.width,n.value.height=a.height,r.putImageData(a,0,0)}();break}};return(m,t)=>(I(),b(y,null,[O,u("div",null,[(I(),b(y,null,L(k,(a,o)=>u("span",{class:R(["filter-type",{active:l.value===o}]),onClick:c=>l.value=o},T(a.name),11,P)),64))]),u("canvas",{ref_key:"canvasRef",ref:n,width:"0",height:"0"},null,512)],64))}},A=S(V,[["__scopeId","data-v-1690b5b3"]]);export{A as default};
