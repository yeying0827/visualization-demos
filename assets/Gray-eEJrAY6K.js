import{l as v,g as f,t as _}from"./ImageHandler-5dxAiF35.js";import{t as S,g as F}from"./color-matrix-ThnoXl7S.js";import{g as h}from"./girl1-zwAbMbEm.js";import{_ as G,r as w,o as L,w as R,a as I,c as y,b as u,F as k,d as T,n as j,t as z,p as E,f as M}from"./index-a4tGsWeP.js";const N=g=>(E("data-v-c7d4d57f"),g=g(),M(),g),O=N(()=>u("h3",null,"灰度化图片",-1)),P=["onClick"],V={__name:"Gray",setup(g){const D=[{name:"普通写法"},{name:"重构写法"},{name:"使用color-matrix优化"}],l=w(0),b=m=>{const e=new Image;return e.crossOrigin="anonymous",new Promise(a=>{e.onload=()=>{a(e)},e.src=m})},n=w(null);let r;L(()=>{r=n.value.getContext("2d"),p(l.value),R(l,()=>{p(l.value)})});const p=m=>{switch(m){case 0:console.log("case 0"),async function(){const e=await b(h),{width:a,height:o}=e;n.value.width=a,n.value.height=o,r.drawImage(e,0,0);const c=r.getImageData(0,0,a,o),s=c.data;for(let t=0;t<a*o*4;t+=4){const i=s[t],x=s[t+1],C=s[t+2],B=s[t+3],d=.2126*i+.7152*x+.0722*C;s[t]=d,s[t+1]=d,s[t+2]=d,s[t+3]=B}r.putImageData(c,0,0)}();break;case 1:console.log("case 1"),async function(){const e=await v(h),a=f(e);_(a,({r:o,g:c,b:s,a:t})=>{const i=.2126*o+.7152*c+.0722*s;return[i,i,i,t]}),n.value.width=a.width,n.value.height=a.height,r.putImageData(a,0,0)}();break;case 2:console.log("case 2"),async function(){const e=await v(h),a=f(e);_(a,({r:o,g:c,b:s,a:t})=>S([o,c,s,t],F(1))),n.value.width=a.width,n.value.height=a.height,r.putImageData(a,0,0)}();break}};return(m,e)=>(I(),y(k,null,[O,u("div",null,[(I(),y(k,null,T(D,(a,o)=>u("span",{class:j(["filter-type",{active:l.value===o}]),onClick:c=>l.value=o},z(a.name),11,P)),64))]),u("canvas",{ref_key:"canvasRef",ref:n,width:"0",height:"0"},null,512)],64))}},J=G(V,[["__scopeId","data-v-c7d4d57f"]]);export{J as default};
